{
  "version": 3,
  "sources": ["src/docuK-prepare-2.3.ts"],
  "sourcesContent": ["import type { DecomposedURI, DescR, FSToRs, FuzzySearch, FuzzySearchResult, PatternURI, RenderResult, SearchVars, SplitHangul, StrToJSON, YTiframeConfig, YTiframeResult } from \"./types/types\";\r\n\r\nwindow.m = window.k = window.k || {}; // window.m can be asigned another JSON or number/string and so on. But window.k must be kept.\r\n(function (m, $) {\r\nm.version0 = \"3.3\";\r\nm.$window = $(window);\r\nm.$document = $(document);\r\nm.$html = $(\"html\");\r\nm.$title = $(\"title\");\r\n// Scripts will be appended on this.\r\nm.$headOrBody = $(\"head\") || $(\"body\") || $(\"#docuK-style\");\r\nm.$headOrBody.append(`<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\r\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\r\n<link href=\"https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@400;700&display=swap\" rel=\"stylesheet\">`);\r\n\r\nconst fsToRs: FSToRs = (m.fsToRs = {\r\n\tfixed: false,\r\n});\r\n\r\n$.fn.exists = function (): boolean {\r\n\treturn Boolean(this.length);\r\n};\r\nm.browserWidth = window.innerWidth;\r\nm.$docuK = $(\".docuK\");\r\n\r\nm.getUTF8Length = function (s: string): number {\r\n\tlet len = 0;\r\n\tfor (let i = 0; i < s.length; i++) {\r\n\t\tlet code = s.charCodeAt(i);\r\n\t\tif (code <= 0x7f) {\r\n\t\t\tlen += 1;\r\n\t\t} else if (code <= 0x7ff) {\r\n\t\t\tlen += 2;\r\n\t\t} else if (code >= 0xd800 && code <= 0xdfff) {\r\n\t\t\t// Surrogate pair: These take 4 bytes in UTF-8 and 2 chars in UCS-2\r\n\t\t\t// (Assume next char is the other [valid] half and just skip it)\r\n\t\t\tlen += 4;\r\n\t\t\ti++;\r\n\t\t} else if (code < 0xffff) {\r\n\t\t\tlen += 3;\r\n\t\t} else {\r\n\t\t\tlen += 4;\r\n\t\t}\r\n\t}\r\n\treturn len;\r\n};\r\nm.getSearchVars = function (searchStr: string | null | undefined): SearchVars {\r\n\tlet vars: SearchVars = [];\r\n\tif (searchStr !== null && searchStr !== undefined && searchStr.length) {\r\n\t\tif (searchStr.startsWith(\"?\")) {\r\n\t\t\tsearchStr = searchStr.substring(1);\r\n\t\t}\r\n\t\tlet j = searchStr.indexOf(\"#\");\r\n\t\tif (j !== -1) {\r\n\t\t\tsearchStr = searchStr.substring(0, j);\r\n\t\t}\r\n\t\tlet splits = searchStr.replace(/&amp;/gi, \"&\").split(\"&\");\r\n\t\tfor (let i = 0; i < splits.length; i++) {\r\n\t\t\tlet key = splits[i];\r\n\t\t\tlet value = \"\";\r\n\t\t\tlet k = key.indexOf(\"=\");\r\n\t\t\tif (k !== -1) {\r\n\t\t\t\tvalue = decodeURIComponent(key.substring(k + 1));\r\n\t\t\t\tkey = key.substring(0, k);\r\n\t\t\t}\r\n\t\t\tkey = decodeURIComponent(key);\r\n\t\t\tvars[i] = vars[key] = { key: key, val: value };\r\n\t\t}\r\n\t}\r\n\treturn vars;\r\n};\r\n\r\n////////////////////////////////////////////////////\r\n// Heap sort.\r\n////////////////////////////////////////////////////\r\nm.heapify = function (arr: any[], key: string, sorted: number[], n: number, i: number): void {\r\n\tlet largest = i;\r\n\tlet l = 2 * i + 1;\r\n\tlet r = 2 * i + 2;\r\n\tif (l < n && arr[sorted[l]][key] > arr[sorted[largest]][key]) {\r\n\t\tlargest = l;\r\n\t}\r\n\tif (r < n && arr[sorted[r]][key] > arr[sorted[largest]][key]) {\r\n\t\tlargest = r;\r\n\t}\r\n\tif (largest != i) {\r\n\t\t[sorted[i], sorted[largest]] = [sorted[largest], sorted[i]];\r\n\t\tm.heapify(arr, key, sorted, n, largest);\r\n\t}\r\n};\r\nm.heapsort = function (arr: any[], key: string, sorted: number[], upto: number): number {\r\n\tlet n = arr.length;\r\n\tfor (let i = Math.floor(n / 2) - 1; i >= 0; i--) {\r\n\t\tm.heapify(arr, key, sorted, n, i);\r\n\t}\r\n\tif (upto) {\r\n\t\tupto = upto > n ? n : upto;\r\n\t} else {\r\n\t\tupto = n;\r\n\t}\r\n\tlet until = n - upto;\r\n\tfor (let i = n - 1; i >= until; i--) {\r\n\t\t[sorted[0], sorted[i]] = [sorted[i], sorted[0]];\r\n\t\tm.heapify(arr, key, sorted, i, 0);\r\n\t}\r\n\treturn until;\r\n};\r\nm.heapsortRest = function (arr: any[], key: string, sorted: number[], upto: number, n: number): number {\r\n\tupto = upto > n ? n : upto;\r\n\tlet until = n - upto;\r\n\tfor (let i = n - 1; i >= until; i--) {\r\n\t\t[sorted[0], sorted[i]] = [sorted[i], sorted[0]];\r\n\t\tm.heapify(arr, key, sorted, i, 0);\r\n\t}\r\n\treturn until;\r\n};\r\n\r\n////////////////////////////////////////////////////\r\n// Escape and Unescape HTML string.\r\n////////////////////////////////////////////////////\r\nm.escapeHTML = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n};\r\nm.escapeOnlyTag = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n};\r\nm.unescapeHTML = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\").replace(/&amp;/g, \"&\");\r\n};\r\nm.escapeAMP = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/%/g, \"%25\").replace(/&/g, \"%26\").replace(/#/g, \"%23\");\r\n};\r\nm.unescapeAMP = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/%23/g, \"#\").replace(/%26/g, \"&\").replace(/%25/g, \"%\");\r\n};\r\nm.escapeEncodePctg = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn str.replace(/([\\!\\@\\#\\$\\%\\^\\&\\*\\[\\]\\{\\}\\_\\<\\>\\,\\.\\/\\?\\~])/g, \"\\\\$1\");\r\n};\r\n\r\n////////////////////////////////////////////////////\r\n// URI rendering :: http link itself, videos, images, maps.\r\n////////////////////////////////////////////////////\r\nm.ptnURI = {};\r\nm.ptnURL = /^https?:\\/\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+/i;\r\nm.ptnFILE = /^file:\\/\\/\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+/i;\r\nm.ptnTag = /^<\\w+[\\s\\S]+>/i;\r\nm.ptnVal = /^([0-9]+(?:\\.[0-9]+)?)\\/([0-9]+(?:\\.[0-9]+)?)$/;\r\n\r\nm.uriToA = function (uri: string | null | undefined): string {\r\n\tif (!uri || typeof uri !== \"string\") {\r\n\t\turi = String(uri);\r\n\t}\r\n\tlet exec = m.ptnURL.exec(uri);\r\n\tif (exec !== null) {\r\n\t\treturn `<a target=\"_blank\" href=\"${exec[0]}\">${m.escapeOnlyTag(decodeURIComponent(uri).replace(/[\\n\\s\\t\\r]/g, \" \"))}</a>`;\r\n\t} else {\r\n\t\texec = m.ptnFILE.exec(uri);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn `<a target=\"_blank\" href=\"${exec[0]}\">${m.escapeOnlyTag(decodeURIComponent(uri).replace(/[\\n\\s\\t\\r]/g, \" \"))}</a>`;\r\n\t\t} else {\r\n\t\t\treturn m.escapeOnlyTag(uri);\r\n\t\t}\r\n\t}\r\n};\r\nm.videoZIndex = 10000;\r\nm.togglePosition = function (elem: HTMLElement): void {\r\n\tlet $elem = $(elem);\r\n\tlet $parent = $elem.closest(\".rC\");\r\n\tif ($parent.hasClass(\"fixed\")) {\r\n\t\t$parent.removeClass(\"fixed\");\r\n\t\t$parent.css(\"z-index\", 0);\r\n\t\twindow.scrollTo(0, $parent.offset().top);\r\n\t\t$elem.text(\"\u25B2 [--stick to the left top--]\");\r\n\t\tm.fsToRs.fixed = false;\r\n\t} else {\r\n\t\twindow.scrollBy({ left: 0, top: -$parent.height(), behavior: \"smooth\" });\r\n\t\t$parent.addClass(\"fixed\");\r\n\t\tlet $z = $parent.find(\".z-index\");\r\n\t\tlet zIndex = m.videoZIndex;\r\n\t\tif ($z.length) {\r\n\t\t\tzIndex = parseInt($z.html());\r\n\t\t} else {\r\n\t\t\t$elem.before(`<span class=\"none z-index\">${m.videoZIndex}</span>`);\r\n\t\t\tm.videoZIndex--;\r\n\t\t}\r\n\t\t$parent.css(\"z-index\", zIndex);\r\n\t\t$elem.text(\"\u25B2 [--return to the original position--]\");\r\n\t\tm.fsToRs.fixed = true;\r\n\t}\r\n};\r\nm.rC = function (elemStr: string, option?: string | null, id?: string | null, noPc?: boolean): string {\r\n\treturn `<div class=\"rC${option ? ` ${option}` : \"\"}\"${!!id ? ` id=\"${id}\"` : \"\"}><div class=\"rSC\">${elemStr}</div>${noPc ? \"\" : `<div class=\"pc\"><span onclick=\"k.togglePosition(this)\">\u25B2 [--stick to the left top--]</span></div>`}</div>`;\r\n};\r\nm.YTiframe = function (v: string, inListPlay: boolean, config: YTiframeConfig, list?: string): string {\r\n\tif (list && list.constructor === String) {\r\n\t\treturn m.rC(`<iframe delayed-src=\"https://www.youtube.com/embed/videoseries?list=${list}&origin=${window.location.origin}\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null);\r\n\t}\r\n\treturn m.rC(`<iframe delayed-src=\"https://www.youtube.com/embed/${v}?origin=${window.location.origin}${config.start ? `&start=${config.start}` : \"\"}${config.end ? `&end=${config.end}` : \"\"}\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null);\r\n};\r\nm.timeToSeconds = function (time: string): number {\r\n\tlet secondToSeek = 0;\r\n\tlet exec = /(?:([0-9]{1,2})\\:)?(?:([0-9]{1,2})\\:)([0-9]{1,})/.exec(time);\r\n\tif (exec !== null) {\r\n\t\tlet hour = exec[1];\r\n\t\tlet minute = exec[2];\r\n\t\tlet second = exec[3];\r\n\t\tif (hour && !isNaN(Number(hour))) {\r\n\t\t\tsecondToSeek += Number(hour) * 3600;\r\n\t\t}\r\n\t\tif (minute && !isNaN(Number(minute))) {\r\n\t\t\tsecondToSeek += Number(minute) * 60;\r\n\t\t}\r\n\t\tif (second && !isNaN(Number(second))) {\r\n\t\t\tsecondToSeek += Number(second);\r\n\t\t}\r\n\t}\r\n\treturn secondToSeek;\r\n};\r\n\r\nlet ptnURI;\r\nptnURI = m.ptnURI[\"www.youtube.com\"] = m.ptnURI[\"youtube.com\"] = m.ptnURI[\"youtu.be\"] = m.ptnURI[\"m.youtube.com\"] = [] as any;\r\nptnURI.regEx = /^(?:watch|embed|live|shorts|playlist)\\/?([\\w\\-\\_]+)?(\\?[^\\\"\\'\\`\\<\\>\\[\\]\\s\\t\\n\\r]+)?/i;\r\nptnURI.regEx0 = /^([\\w\\-\\_]+)\\/?(\\?[^\\\"\\'\\`\\<\\>\\[\\]\\s\\t\\n\\r]+)?/i;\r\nptnURI.regEx1 = /^(@?[^\\\"\\'\\`\\<\\>\\[\\]\\s\\t\\n\\r]+)?/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean, descR: DescR): Promise<YTiframeResult> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet config: YTiframeConfig = {};\r\n\t\tif (descR) {\r\n\t\t\tif (descR[\"#start\"]?.val) {\r\n\t\t\t\tconfig.startSeconds = config.start = m.timeToSeconds(descR[\"#start\"].val.trim());\r\n\t\t\t}\r\n\t\t\tif (descR[\"#end\"]?.val) {\r\n\t\t\t\tconfig.endSeconds = config.end = m.timeToSeconds(descR[\"#end\"].val.trim());\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet exec = m.ptnURI[\"www.youtube.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet vars = null;\r\n\t\t\tif (exec[2]) {\r\n\t\t\t\tvars = m.getSearchVars(exec[2]);\r\n\t\t\t}\r\n\t\t\tlet v = null;\r\n\t\t\tlet list = null;\r\n\t\t\tif (exec[1]) {\r\n\t\t\t\tv = exec[1];\r\n\t\t\t}\r\n\t\t\tif (vars?.v?.val) {\r\n\t\t\t\tv = vars.v.val;\r\n\t\t\t}\r\n\t\t\tif (vars?.list?.val) {\r\n\t\t\t\tlist = vars?.list?.val;\r\n\t\t\t}\r\n\t\t\tif (list) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.youtube.com/watch?list=${list}\">https://www.youtube.com/watch?list=${list}</a><br/>` : \"\") + m.YTiframe(v, inListPlay, config, list),\r\n\t\t\t\t\tfrom: \"youtube-list\",\r\n\t\t\t\t\tlist,\r\n\t\t\t\t\tconfig,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (v) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.youtube.com/watch?v=${v}${config.start ? `&start=${config.start}` : \"\"}${config.end ? `&end=${config.end}` : \"\"}${list ? `&list=${list}` : \"\"}\">https://www.youtube.com/watch?v=${v}${config.start ? `&start=${config.start}` : \"\"}${config.end ? `&end=${config.end}` : \"\"}${list ? `&list=${list}` : \"\"}</a><br/>` : \"\") + m.YTiframe(v, inListPlay, config),\r\n\t\t\t\t\tfrom: \"youtube\",\r\n\t\t\t\t\tvideoId: v,\r\n\t\t\t\t\tlist,\r\n\t\t\t\t\tconfig,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\texec = m.ptnURI[\"youtu.be\"].regEx0.exec(uriRest);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\tlet vars = null;\r\n\t\t\t\tif (exec[2]) {\r\n\t\t\t\t\tvars = m.getSearchVars(exec[2]);\r\n\t\t\t\t}\r\n\t\t\t\tlet v = null;\r\n\t\t\t\tlet list = null;\r\n\t\t\t\tif (exec[1]) {\r\n\t\t\t\t\tv = exec[1];\r\n\t\t\t\t}\r\n\t\t\t\tif (vars?.v?.val) {\r\n\t\t\t\t\tv = vars.v.val;\r\n\t\t\t\t}\r\n\t\t\t\tif (vars?.list?.val) {\r\n\t\t\t\t\tlist = vars.list.val;\r\n\t\t\t\t}\r\n\t\t\t\tif (list) {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.youtube.com/watch?list=${list}\">https://www.youtube.com/watch?list=${list}</a><br/>` : \"\") + m.YTiframe(v, inListPlay, config, list),\r\n\t\t\t\t\t\tfrom: \"youtube-list\",\r\n\t\t\t\t\t\tlist,\r\n\t\t\t\t\t\tconfig,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.youtube.com/watch?v=${v}${config.start ? `&start=${config.start}` : \"\"}${config.end ? `&end=${config.end}` : \"\"}${list ? `&list=${list}` : \"\"}\">https://www.youtube.com/watch?v=${v}${config.start ? `&start=${config.start}` : \"\"}${config.end ? `&end=${config.end}` : \"\"}${list ? `&list=${list}` : \"\"}</a><br/>` : \"\") + m.YTiframe(v, inListPlay, config),\r\n\t\t\t\t\tfrom: \"youtube\",\r\n\t\t\t\t\tvideoId: v,\r\n\t\t\t\t\tlist,\r\n\t\t\t\t\tconfig,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\texec = m.ptnURI[\"www.youtube.com\"].regEx1.exec(uriRest);\r\n\t\t\t\tif (exec !== null) {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\thtml: toA ? `<a target=\"_blank\" href=\"https://www.youtube.com/${exec[0]}\">https://www.youtube.com/${exec[0]}</a>` : ``,\r\n\t\t\t\t\t\tfrom: \"-youtube-link\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treject(false);\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"docs.google.com\"] = [] as any;\r\nptnURI.regEx = /^spreadsheets\\/d\\/e\\/([\\w\\-\\_]+)/i;\r\nptnURI.regEx1 = /^spreadsheets\\/d\\/([\\w\\-\\_]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { docId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"docs.google.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://docs.google.com/spreadsheets/d/e/${exec[1]}/pubhtml\">https://docs.google.com/spreadsheets/d/e/${exec[1]}/pubhtml</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://docs.google.com/spreadsheets/d/e/${exec[1]}/pubhtml?widget=true&headers=false\"></iframe>`),\r\n\t\t\t\tfrom: \"docs-google\",\r\n\t\t\t\tdocId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet exec = m.ptnURI[\"docs.google.com\"].regEx1.exec(uriRest);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: toA ? `<a target=\"_blank\" href=\"https://docs.google.com/${uriRest}\">https://docs.google.com/${uriRest}</a>` : ``,\r\n\t\t\t\t\tfrom: \"-docs-google\",\r\n\t\t\t\t\tdocId: exec[1],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"instagram.com\"] = m.ptnURI[\"www.instagram.com\"] = [] as any;\r\nptnURI.regEx = /^(?:p|tv|reel)\\/([\\w\\-\\_]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { imgId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"instagram.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.instagram.com/p/${exec[1]}/\">https://www.instagram.com/p/${exec[1]}/</a><br/>` : \"\") + m.rC(`<div class=\"center\"><iframe delayed-src=\"https://www.instagram.com/p/${exec[1]}/embed\" allowtransparency=\"true\"></iframe></div>`, \"instagram\", null, true),\r\n\t\t\t\tfrom: \"instagram\",\r\n\t\t\t\timgId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"imgur.com\"] = m.ptnURI[\"www.imgur.com\"] = [] as any;\r\nptnURI.regEx = /^a\\/([\\w\\-\\_]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { imgId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"imgur.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://imgur.com/a/${exec[1]}\">https://imgur.com/a/${exec[1]}</a><br/>` : \"\") + m.rC(`<div class=\"center\"><iframe delayed-src=\"https://imgur.com/a/${exec[1]}/embed?pub=true&context=false\" allowtransparency=\"true\"></iframe></div>`, \"imgur\", null, true),\r\n\t\t\t\tfrom: \"imgur\",\r\n\t\t\t\timgId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"www.tiktok.com\"] = [] as any;\r\nptnURI.regEx = /^@(\\S+)\\/video\\/([0-9]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { userId: string; videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"www.tiktok.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.tiktok.com/@${exec[1]}/video/${exec[2]}\">https://www.tiktok.com/@${exec[1]}/video/${exec[2]}</a><br/>` : \"\") + m.rC(`<div class=\"center\"><iframe sandbox=\"allow-popups allow-popups-to-escape-sandbox allow-scripts allow-top-navigation allow-same-origin\" delayed-src=\"https://www.tiktok.com/embed/v2/${exec[2]}?referrer=${encodeURIComponent(window.location.host)}\"></iframe></div>`, \"tiktok\", null, true),\r\n\t\t\t\tfrom: \"tiktok\",\r\n\t\t\t\tuserId: exec[1],\r\n\t\t\t\tvideoId: exec[2],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"vt.tiktok.com\"] = [] as any;\r\nptnURI.regEx = /^(\\w+)\\//i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & DecomposedURI & { userId?: string; videoId?: string; newURI?: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"vt.tiktok.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet shortURI = `https://vt.tiktok.com/${exec[1]}/`;\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: \"https://recoeve.net/BlogStat/getFullURI\",\r\n\t\t\t\tdata: shortURI,\r\n\t\t\t\tdataType: \"text\",\r\n\t\t\t})\r\n\t\t\t\t.fail(function (resp) {\r\n\t\t\t\t\tresolve(resp);\r\n\t\t\t\t})\r\n\t\t\t\t.done(async function (resp) {\r\n\t\t\t\t\tlet decomposedURI: DecomposedURI = m.decomposeURI(resp);\r\n\t\t\t\t\tif (decomposedURI.uriHost === \"www.tiktok.com\") {\r\n\t\t\t\t\t\tlet uriRendered: RenderResult & { newURI?: string } = await m.uriRendering(resp, toA, inListPlay);\r\n\t\t\t\t\t\t// * (uri, toA, inListPlay, descR)\r\n\t\t\t\t\t\turiRendered.newURI = resp;\r\n\t\t\t\t\t\tresolve({ ...uriRendered, ...decomposedURI });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\thtml: toA ? `<a target=\"_blank\" href=\"${shortURI}\">${shortURI}</a>` : \"\",\r\n\t\t\t\t\t\t\tfrom: \"-tiktok-link\",\r\n\t\t\t\t\t\t\t...decomposedURI,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"serviceapi.rmcnmv.naver.com\"] = [] as any;\r\nptnURI.regEx = /^\\S+/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"serviceapi.rmcnmv.naver.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://serviceapi.rmcnmv.naver.com/${exec[0]}\">https://serviceapi.rmcnmv.naver.com/${exec[0]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://serviceapi.rmcnmv.naver.com/${exec[0]}\" marginwidth=\"0\" marginheight=\"0\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"naver\",\r\n\t\t\t\tvideoId: exec[0],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"tv.naver.com\"] = [] as any;\r\nptnURI.regEx = /^(?:v|embed)\\/([0-9]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"tv.naver.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://tv.naver.com/v/${exec[1]}\">https://tv.naver.com/v/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://tv.naver.com/embed/${exec[1]}?autoPlay=false\" marginwidth=\"0\" marginheight=\"0\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"naver\",\r\n\t\t\t\tvideoId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"weverse.io\"] = [] as any;\r\nptnURI.regEx = /^(\\S+)\\/artist\\/([0-9\\-]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { singer: string; videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"weverse.io\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://weverse.io/${exec[1]}/artist/${exec[2]}\">https://weverse.io/${exec[1]}/artist/${exec[2]}</a><br/>` : \"\") + m.rC(`<iframe src=\"https://weverse.io/${exec[1]}/artist/${exec[2]}\" marginwidth=\"0\" marginheight=\"0\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"weverse\",\r\n\t\t\t\tsinger: exec[1],\r\n\t\t\t\tvideoId: exec[2],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"tv.kakao.com\"] = m.ptnURI[\"entertain.daum.net\"] = [] as any;\r\nptnURI.regEx = /(?:v|cliplink)\\/([0-9]+)/i;\r\nptnURI.regEx1 = /video\\/([0-9]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"tv.kakao.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://tv.kakao.com/v/${exec[1]}\">https://tv.kakao.com/v/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://play-tv.kakao.com/embed/player/cliplink/${exec[1]}\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"kakao\",\r\n\t\t\t\tvideoId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\texec = m.ptnURI[\"entertain.daum.net\"].regEx1.exec(uriRest);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://tv.kakao.com/v/${exec[1]}\">https://tv.kakao.com/v/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://play-tv.kakao.com/embed/player/cliplink/${exec[1]}\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\t\tfrom: \"kakao\",\r\n\t\t\t\t\tvideoId: exec[1],\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treject(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"tvpot.daum.net\"] = [] as any;\r\nptnURI.regEx = /^v\\/([\\w\\-\\_]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"tvpot.daum.net\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://tvpot.daum.net/v/${exec[1]}\">https://tvpot.daum.net/v/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://videofarm.daum.net/controller/video/viewer/Video.html?vid=${exec[1]}${exec[1].length < 15 ? \"$\" : \"\"}&play_loc=undefined\"></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"daum\",\r\n\t\t\t\tvideoId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"vimeo.com\"] = [] as any;\r\nptnURI.regEx = /^([0-9]+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"vimeo.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://vimeo.com/${exec[1]}\">https://vimeo.com/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://player.vimeo.com/video/${exec[1]}\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"vimeo\",\r\n\t\t\t\tvideoId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"www.dailymotion.com\"] = [] as any;\r\nptnURI.regEx = /video\\/(\\w+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"www.dailymotion.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.dailymotion.com/video/${exec[1]}\">https://www.dailymotion.com/video/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://www.dailymotion.com/embed/video/${exec[1]}\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"dailymotion\",\r\n\t\t\t\tvideoId: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"namu.wiki\"] = [] as any;\r\nptnURI.regEx = /w\\/(.*)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { pathname: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"namu.wiki\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet pathname = exec[1].replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\tresolve({\r\n\t\t\t\thtml: `<a target=\"_blank\" href=\"https://namu.wiki/w/${pathname}\">https://namu.wiki/w/${m.escapeOnlyTag(decodeURIComponent(pathname))}</a>`,\r\n\t\t\t\tfrom: \"namu.wiki\",\r\n\t\t\t\tpathname,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"www.ted.com\"] = m.ptnURI[\"embed.ted.com\"] = [] as any;\r\nptnURI.regEx = /^talks\\/(\\S+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"www.ted.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\turiRest = uriRest.substring(6);\r\n\t\t\tlet k = uriRest.indexOf(\"?\");\r\n\t\t\tlet vars = null;\r\n\t\t\tif (k !== -1) {\r\n\t\t\t\tvars = m.getSearchVars(uriRest.substring(k));\r\n\t\t\t\turiRest = uriRest.substring(0, k);\r\n\t\t\t}\r\n\t\t\tlet v = uriRest;\r\n\t\t\tif (vars?.language) {\r\n\t\t\t\turiRest = \"lang/\" + vars.language.val + \"/\" + uriRest;\r\n\t\t\t}\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://www.ted.com/${exec[1]}\">https://www.ted.com/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://embed.ted.com/talks/${uriRest}\" allowfullscreen></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"ted\",\r\n\t\t\t\tvideoId: v,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"w.soundcloud.com\"] = [] as any;\r\nptnURI.regEx = /^player\\/(\\?\\S+)/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"w.soundcloud.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet vars = m.getSearchVars(exec[1]);\r\n\t\t\tlet lastPath = \"player/?\";\r\n\t\t\tfor (let i = 0; i < vars.length; i++) {\r\n\t\t\t\tif (vars[i].key === \"auto_play\") {\r\n\t\t\t\t\tlastPath += \"auto_play=false&\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlastPath += vars[i].key + \"=\" + vars[i].val + \"&\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://w.soundcloud.com/${exec[1]}\">https://w.soundcloud.com/${exec[1]}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://w.soundcloud.com/${lastPath.substring(0, lastPath.length - 1)}\"></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed soundcloud\" : \"soundcloud\"),\r\n\t\t\t\tfrom: \"soundcloud\",\r\n\t\t\t\tvideoId: vars?.url?.val,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"gall.dcinside.com\"] = [] as any;\r\nptnURI.regEx = /\\/movie\\/share_movie(\\?\\S+)/i;\r\nptnURI.regEx1 = /\\/poll\\/vote(\\?\\S+)/i;\r\n// https://gall.dcinside.com/board/poll/vote?no=710233\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId?: string; voteId?: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"gall.dcinside.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet vars = m.getSearchVars(exec[1]);\r\n\t\t\tlet v = vars.no?.val;\r\n\t\t\tif (v) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://gall.dcinside.com/board/movie/share_movie?no=${v}\">https://gall.dcinside.com/board/movie/share_movie?no=${v}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://gall.dcinside.com/board/movie/share_movie?no=${v}\"></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : \"\"),\r\n\t\t\t\t\tfrom: \"dcinside\",\r\n\t\t\t\t\tvideoId: v,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: `<a target=\"_blank\" href=\"https://gall.dcinside.com/${uriRest}\">https://gall.dcinside.com/${m.escapeOnlyTag(decodeURIComponent(uriRest))}</a>`,\r\n\t\t\t\t\tfrom: \"dcinside\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\texec = m.ptnURI[\"gall.dcinside.com\"].regEx1.exec(uriRest);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\tlet vars = m.getSearchVars(exec[1]);\r\n\t\t\t\tlet no = vars.no?.val;\r\n\t\t\t\tif (no) {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://gall.dcinside.com/board/poll/vote?no=${no}\">https://gall.dcinside.com/board/poll/vote?no=${no}</a><br/>` : \"\") + m.rC(`<iframe src=\"https://gall.dcinside.com/board/poll/vote?no=${no}\"></iframe>`),\r\n\t\t\t\t\t\tfrom: \"dcinside\",\r\n\t\t\t\t\t\tvoteId: no,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treject(false);\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[\"v.qq.com\"] = [] as any;\r\nptnURI.regEx = /([\\w\\d]+)\\/([\\w\\d]+).html$/i;\r\nptnURI.toIframe = function (uriRest: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { videoId: string; newURI: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[\"v.qq.com\"].regEx.exec(uriRest);\r\n\t\tif (exec !== null) {\r\n\t\t\tlet v = exec[2];\r\n\t\t\tif (v) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"https://v.qq.com/${uriRest}\">https://v.qq.com/${uriRest}</a><br/>` : \"\") + m.rC(`<iframe delayed-src=\"https://v.qq.com/txp/iframe/player.html?vid=${v}\"></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : \"\"),\r\n\t\t\t\t\tfrom: \"qq\",\r\n\t\t\t\t\tvideoId: v,\r\n\t\t\t\t\tnewURI: `https://v.qq.com/${uriRest}`,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treject(false);\r\n\t});\r\n};\r\n\r\nm.ptnURI = [];\r\nptnURI = m.ptnURI[0] = [] as any;\r\nptnURI.regEx = /^(https?:\\/\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+\\.(?:jpg|jpeg|bmp|gif|png|webp|svg|tif))(?=$|\\?|\\s)/i;\r\nptnURI.toIframe = function (uri: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { src: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[0].regEx.exec(uri);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"${exec[1]}\">${m.escapeOnlyTag(decodeURIComponent(uri))}</a><br/>` : \"\") + `<div class=\"center\"><img delayed-src=\"${exec[1]}\"/></div>`,\r\n\t\t\t\tfrom: \"image\",\r\n\t\t\t\tsrc: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[1] = [] as any;\r\nptnURI.regEx = /^https?:\\/\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+\\.(?:mp4|ogg|webm|avif|avi)(?=$|\\?|\\s)/i;\r\nptnURI.toIframe = function (uri: string, inListPlay: boolean, toA: boolean, descR: DescR): Promise<RenderResult & { config: YTiframeConfig; src: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet config: YTiframeConfig = {};\r\n\t\tif (descR) {\r\n\t\t\tif (descR[\"#start\"]?.val) {\r\n\t\t\t\tconfig.start = m.timeToSeconds(descR[\"#start\"].val.trim());\r\n\t\t\t}\r\n\t\t\tif (descR[\"#end\"]?.val) {\r\n\t\t\t\tconfig.end = m.timeToSeconds(descR[\"#end\"].val.trim());\r\n\t\t\t}\r\n\t\t\tif (config.start || config.end) {\r\n\t\t\t\tconfig.hash = `${config.start ? `#t=${config.start}` : \"#t=0\"}${config.end ? `,${config.end}` : \"\"}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet exec = m.ptnURI[1].regEx.exec(uri);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: (toA ? `<a target=\"_blank\" href=\"${exec[0]}${config.hash ? config.hash : \"\"}\">${m.escapeOnlyTag(decodeURIComponent(`${uri}${config.hash ? config.hash : \"\"}`))}</a><br/>` : \"\") + m.rC(`<video controls preload=\"metadata\" delayed-src=\"${exec[0]}${config.hash ? config.hash : \"\"}\"></video>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\tfrom: \"video\",\r\n\t\t\t\tsrc: exec[0],\r\n\t\t\t\tconfig,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[2] = [] as any;\r\nptnURI.regEx = /^https?:\\/\\/kr[\\d]+\\.sogirl\\.so(\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]*)?/i;\r\nptnURI.regEx1 = /^https?:\\/\\/kr[\\d]+\\.sogirl\\.co(\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]*)?/i;\r\nptnURI.toIframe = function (uri: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { newURI: string; src: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[2].regEx.exec(uri);\r\n\t\tif (exec !== null) {\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: `<a target=\"_blank\" href=\"https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}\">${m.escapeOnlyTag(decodeURIComponent(`https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}`))}</a>`,\r\n\t\t\t\tnewURI: `https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}`,\r\n\t\t\t\tfrom: \"sogirl\",\r\n\t\t\t\tsrc: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\texec = m.ptnURI[2].regEx1.exec(uri);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: `<a target=\"_blank\" href=\"https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}\">${m.escapeOnlyTag(decodeURIComponent(`https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}`))}</a>`,\r\n\t\t\t\t\tnewURI: `https://kr78.sogirl.so${exec[1] ? exec[1] : \"\"}`,\r\n\t\t\t\t\tfrom: \"sogirl\",\r\n\t\t\t\t\tsrc: exec[1],\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treject(false);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[3] = [] as any;\r\nptnURI.regEx = /^https?:\\/\\/kr[\\d]+\\.topgirl\\.co(\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]*)?/i;\r\nptnURI.toIframe = function (uri: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { newURI: string; src: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[3].regEx.exec(uri);\r\n\t\tif (exec !== null) {\r\n\t\t\tresolve({\r\n\t\t\t\thtml: `<a target=\"_blank\" href=\"https://kr37.topgirl.co${exec[1] ? exec[1] : \"\"}\">${m.escapeOnlyTag(decodeURIComponent(`https://kr37.topgirl.co${exec[1] ? exec[1] : \"\"}`))}</a>`,\r\n\t\t\t\tnewURI: `https://kr37.topgirl.co${exec[1] ? exec[1] : \"\"}`,\r\n\t\t\t\tfrom: \"topgirl\",\r\n\t\t\t\tsrc: exec[1],\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nptnURI = m.ptnURI[4] = [] as any;\r\nptnURI.regEx = /^file:\\/\\/\\/([^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+\\.(?:jpg|jpeg|bmp|gif|png|webp|svg|tif))(?=$|\\?|\\s)/i;\r\nptnURI.regEx1 = /^file:\\/\\/\\/([^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+\\.(?:mp4|ogg|webm|avi))(?=$|\\?|\\s)/i;\r\nptnURI.regEx2 = /^file:\\/\\/\\/([^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+\\.(?:pdf|html|htm))(?=$|\\?|\\s)/i;\r\nptnURI.toIframe = function (uri: string, inListPlay: boolean, toA: boolean): Promise<RenderResult & { src: string }> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\tlet exec = m.ptnURI[4].regEx.exec(uri);\r\n\t\tlet href = null;\r\n\t\tif (exec !== null) {\r\n\t\t\thref = exec[1].replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\turi = uri.replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\treturn resolve({\r\n\t\t\t\thtml: `<a target=\"_blank\" href=\"${href}\">${m.escapeOnlyTag(decodeURIComponent(uri))}</a>` + m.rC(`<div class=\"center\"><img delayed-src=\"${href}\"/></div>`, inListPlay && m.fsToRs.fixed ? \"fixed eveElse\" : \"eveElse\"),\r\n\t\t\t\tfrom: \"file-image\",\r\n\t\t\t\tsrc: href,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\texec = m.ptnURI[4].regEx1.exec(uri);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\thref = exec[1].replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\t\turi = uri.replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: `<a target=\"_blank\" href=\"${href}\">${m.escapeOnlyTag(decodeURIComponent(uri))}</a><br/>` + m.rC(`<video controls preload=\"metadata\" delayed-src=\"${href}\"></video>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\t\tfrom: \"file-video\",\r\n\t\t\t\t\tsrc: href,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\texec = m.ptnURI[4].regEx2.exec(uri);\r\n\t\t\t\tif (exec !== null) {\r\n\t\t\t\t\thref = exec[1].replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\t\t\turi = uri.replace(/\\+/g, \"%20\").replace(/%2B/g, \"%20\");\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\thtml: `<a target=\"_blank\" href=\"${href}\">${m.escapeOnlyTag(decodeURIComponent(uri))}</a><br/>` + m.rC(`<iframe delayed-src=\"${href}\"></iframe>`, inListPlay && m.fsToRs.fixed ? \"fixed\" : null),\r\n\t\t\t\t\t\tfrom: \"file-pdf\",\r\n\t\t\t\t\t\tsrc: href,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn reject(false);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nm.getConciseURI = function (uri: string): Promise<string> {\r\n\treturn new Promise(function (resolve, reject): void {\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl: \"https://recoeve.net/reco/getConciseURI\",\r\n\t\t\tdata: uri.trim(),\r\n\t\t\tdataType: \"text\",\r\n\t\t})\r\n\t\t\t.fail(function (resp) {\r\n\t\t\t\treject(resp);\r\n\t\t\t})\r\n\t\t\t.done(function (resp) {\r\n\t\t\t\tresolve(resp);\r\n\t\t\t});\r\n\t});\r\n};\r\nm.ptnPureNumber = /^\\d+$/;\r\nm.formatURI = async function (uri: string, keepOriginal: boolean): Promise<string> {\r\n\treturn new Promise(async function (resolve, reject): Promise<void> {\r\n\t\tif (uri && uri.constructor === String) {\r\n\t\t\turi = uri.trim().replace(/[\\s\\t\\n]+/g, \" \");\r\n\t\t\tlet exec = m.ptnTag.exec(uri);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet $uri = $(uri);\r\n\t\t\t\t\tlet src = $uri.attr(\"src\");\r\n\t\t\t\t\tif (src) {\r\n\t\t\t\t\t\turi = src;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsrc = $uri.find(\"[src]\").attr(\"src\");\r\n\t\t\t\t\t\tif (src) {\r\n\t\t\t\t\t\t\turi = src;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\texec = m.ptnPureNumber.exec(uri);\r\n\t\t\tif (exec !== null) {\r\n\t\t\t\turi = \"Number: \" + uri;\r\n\t\t\t}\r\n\t\t\tif (!keepOriginal && m.getUTF8Length(uri) > 255) {\r\n\t\t\t\treturn m.getConciseURI(uri).then((conciseURI: string) => resolve(m.unescapeHTML(conciseURI)));\r\n\t\t\t}\r\n\t\t\treturn resolve(m.unescapeHTML(uri).trim());\r\n\t\t}\r\n\t\treturn resolve(\"\");\r\n\t});\r\n};\r\nm.decomposeURI = function (uri: string): DecomposedURI {\r\n\turi = String(uri);\r\n\turi = uri.split(/[\\s\\t\\n\\r]+/)[0];\r\n\tconst res: DecomposedURI = {\r\n\t\turi,\r\n\t\tprotocol: null,\r\n\t\turiHost: null,\r\n\t\tpathname: null,\r\n\t\tsearch: null,\r\n\t\thash: null,\r\n\t}; // uriHost, pathname, search, hash\r\n\tif (uri.length > 4 && uri.substring(0, 4).toLowerCase() === \"http\") {\r\n\t\tlet k = 4;\r\n\t\tres.protocol = \"http:\";\r\n\t\tif (uri.charAt(k) == \"s\" || uri.charAt(k) == \"S\") {\r\n\t\t\tk++;\r\n\t\t\tres.protocol = \"https:\";\r\n\t\t}\r\n\t\tif (uri.startsWith(\"://\", k)) {\r\n\t\t\tk += 3;\r\n\t\t\tlet l = uri.indexOf(\"/\", k);\r\n\t\t\tif (l > 0) {\r\n\t\t\t\tres.uriHost = uri.substring(k, l);\r\n\t\t\t\tlet m = uri.indexOf(\"?\", l);\r\n\t\t\t\tif (m > 0) {\r\n\t\t\t\t\tres.pathname = uri.substring(l, m);\r\n\t\t\t\t\tlet n = uri.indexOf(\"#\", m);\r\n\t\t\t\t\tif (n > 0) {\r\n\t\t\t\t\t\tres.search = uri.substring(m, n);\r\n\t\t\t\t\t\tres.hash = uri.substring(n);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres.search = uri.substring(m);\r\n\t\t\t\t\t\tres.hash = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres.search = \"\";\r\n\t\t\t\t\tlet n = uri.indexOf(\"#\", l);\r\n\t\t\t\t\tif (n > 0) {\r\n\t\t\t\t\t\tres.pathname = uri.substring(l, n);\r\n\t\t\t\t\t\tres.hash = uri.substring(n);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres.pathname = uri.substring(l);\r\n\t\t\t\t\t\tres.hash = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tres.pathname = \"\";\r\n\t\t\t\tlet m = uri.indexOf(\"?\", k);\r\n\t\t\t\tif (m > 0) {\r\n\t\t\t\t\tres.uriHost = uri.substring(k, m);\r\n\t\t\t\t\tlet n = uri.indexOf(\"#\", m);\r\n\t\t\t\t\tif (n > 0) {\r\n\t\t\t\t\t\tres.search = uri.substring(m, n);\r\n\t\t\t\t\t\tres.hash = uri.substring(n);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres.search = uri.substring(m);\r\n\t\t\t\t\t\tres.hash = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres.search = \"\";\r\n\t\t\t\t\tlet n = uri.indexOf(\"#\", k);\r\n\t\t\t\t\tif (n > 0) {\r\n\t\t\t\t\t\tres.uriHost = uri.substring(k, n);\r\n\t\t\t\t\t\tres.hash = uri.substring(n);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres.uriHost = uri.substring(k);\r\n\t\t\t\t\t\tres.hash = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (res.uriHost) {\r\n\t\tres.uriHost = res.uriHost.toLowerCase();\r\n\t\tres.uriWithoutHash = res.protocol + \"//\" + res.uriHost + res.pathname + res.search;\r\n\t}\r\n\treturn res;\r\n};\r\nm.uriRendering = function (uri: string, toA: boolean, inListPlay: boolean, descR?: DescR): Promise<RenderResult & DecomposedURI & { uri: string }> {\r\n\treturn new Promise(async function (resolve, reject): Promise<void> {\r\n\t\turi = uri.trim();\r\n\t\tlet decomposedURI: DecomposedURI;\r\n\t\tlet result: RenderResult;\r\n\t\tconst { uriHost, pathname, search, hash } = (decomposedURI = m.decomposeURI(uri));\r\n\t\tconst uriRest = (pathname ? pathname.substring(1) : \"\") + search;\r\n\t\tif (uriHost) {\r\n\t\t\tif (m.ptnURI[uriHost]) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresult = await m.ptnURI[uriHost]?.toIframe(uriRest, inListPlay, toA, descR);\r\n\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\t\t...result,\r\n\t\t\t\t\t\t\t...decomposedURI,\r\n\t\t\t\t\t\t\turi,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {}\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < m.ptnURI.length; i += 1) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresult = await m.ptnURI[i]?.toIframe(uri, inListPlay, toA, descR);\r\n\t\t\t\t\tif (Boolean(result)) {\r\n\t\t\t\t\t\treturn resolve({ ...result, ...decomposedURI, uri });\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {}\r\n\t\t\t}\r\n\t\t\tif (toA) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\thtml: m.uriToA(uri),\r\n\t\t\t\t\tfrom: \"uriToA\",\r\n\t\t\t\t\t...decomposedURI,\r\n\t\t\t\t\turi,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resolve({\r\n\t\t\thtml: m.escapeOnlyTag(decodeURIComponent(uri)),\r\n\t\t\tfrom: \"uri\",\r\n\t\t\t...decomposedURI,\r\n\t\t\turi,\r\n\t\t});\r\n\t});\r\n};\r\nm.relatedRendering = function (str: string): Promise<string> {\r\n\treturn new Promise(async function (resolve, reject): Promise<void> {\r\n\t\tif (!str || typeof str !== \"string\") {\r\n\t\t\treturn resolve(\"\");\r\n\t\t}\r\n\t\tconst ptnURL = /https?:\\/\\/[^\\s\\t\\n\\r\\\"\\'\\`\\<\\>\\{\\}\\[\\]]+/gi;\r\n\t\tptnURL.lastIndex = 0;\r\n\t\tlet exec = ptnURL.exec(str);\r\n\t\tlet start = 0;\r\n\t\tlet res = \"\";\r\n\t\twhile (exec !== null) {\r\n\t\t\tres += m.escapeOnlyTag(str.substring(start, exec.index));\r\n\t\t\tlet uriRendered = await m.uriRendering(exec[0], true, false, {});\r\n\t\t\t// * (uri, toA, inListPlay, descR)\r\n\t\t\tres += uriRendered.html;\r\n\t\t\tstart = ptnURL.lastIndex;\r\n\t\t\tif (start <= 0 || start >= str.length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\texec = ptnURL.exec(str);\r\n\t\t}\r\n\t\tif (exec === null && start >= 0 && start < str.length) {\r\n\t\t\tres += m.escapeOnlyTag(str.substring(start));\r\n\t\t}\r\n\t\tresolve(res);\r\n\t});\r\n};\r\n\r\n/*\t:: cookies.js :: Slightly edited by kipid at 2023-10-25.\r\n|*|\r\n|*|\tA complete cookies reader/writer framework with full unicode support.\r\n|*|\r\n|*|\thttps://developer.mozilla.org/en-US/docs/DOM/document.cookie\r\n|*|\r\n|*|\tThis framework is released under the GNU Public License, version 3 or later.\r\n|*|\thttps://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n|*|\r\n|*|\tSyntaxes:\r\n|*|\t* docCookies.setItem(name, value[, end[, path[, domain[, secure]]]]) // end :: Number: max-age in seconds\r\n|*|\t* docCookies.getItem(name)\r\n|*|\t* docCookies.removeItem(name[, path], domain)\r\n|*|\t* docCookies.hasItem(name)\r\n|*|\t* docCookies.keys()\r\n*/\r\nm.expire = 365 * 24 * 60 * 60; // max-age in seconds.\r\nm.docCookies = {\r\n\thasItem: function (sKey: string): boolean {\r\n\t\treturn new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\").test(document.cookie);\r\n\t},\r\n\tgetItem: function (sKey: string): string | null {\r\n\t\treturn decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n\t},\r\n\tremoveItem: function (sKey: string, sPath?: string | false, sDomain?: string | false, bSecure?: boolean): boolean {\r\n\t\tif (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdocument.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n\t\treturn true;\r\n\t},\r\n\tsetItem: function (sKey: string, sValue: string, vEnd?: number | string | Date, sPath?: string | false, sDomain?: string | false, bSecure?: boolean): boolean {\r\n\t\tif (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet sExpires = \"\";\r\n\t\tif (vEnd) {\r\n\t\t\tswitch (vEnd.constructor) {\r\n\t\t\t\tcase Number: {\r\n\t\t\t\t\tsExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase String: {\r\n\t\t\t\t\tsExpires = \"; expires=\" + vEnd;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase Date: {\r\n\t\t\t\t\tsExpires = \"; expires=\" + (vEnd as Date).toUTCString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdocument.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n\t\treturn true;\r\n\t},\r\n\tkeys: function (): string[] {\r\n\t\tlet aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\r\n\t\t// for (let nIdx=0;nIdx<aKeys.length;nIdx++) { aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]); }\r\n\t\treturn aKeys;\r\n\t},\r\n};\r\n\r\n////////////////////////////////////////////////////\r\n// Local storage\r\n////////////////////////////////////////////////////\r\nm.localStorage = {\r\n\tsetItem: function (key: string, val: string): boolean {\r\n\t\tlocalStorage.setItem(encodeURIComponent(key), encodeURIComponent(val));\r\n\t\treturn true;\r\n\t},\r\n\tgetItem: function (key: string): string | null {\r\n\t\treturn decodeURIComponent(localStorage.getItem(encodeURIComponent(key)));\r\n\t},\r\n\tremoveItem: function (key: string): boolean {\r\n\t\tlocalStorage.removeItem(encodeURIComponent(key));\r\n\t\treturn true;\r\n\t},\r\n\tclear: function (): boolean {\r\n\t\tlocalStorage.clear();\r\n\t\treturn true;\r\n\t},\r\n};\r\n\r\nm.toggleFK = function (): void {\r\n\tif (m.$floating_key.is(\":visible\")) {\r\n\t\tm.docCookies.setItem(\"hideFK\", \"y\", Infinity, \"/\", false, true);\r\n\t} else {\r\n\t\tm.docCookies.removeItem(\"hideFK\", \"/\", false);\r\n\t}\r\n\tm.$floating_key.toggle();\r\n};\r\n\r\nm.promoting = function (id: string): string {\r\n\tlet res = `<div class=\"docuK-con\"><div class=\"button toggle-a-mess fRight cBoth order\" onclick=\"k.toggleAMess(this)\">Toggle <span class=\"bold underline\">a</span> mess</div>\r\n<div class=\"cBoth\"></div>\r\n<div class=\"promoting\"${id ? ` id=\"${id}\"` : \"\"}>`;\r\n\tif (m.recoCats) {\r\n\t\tres += `<div class=\"order\">\r\n<div class=\"p\">* \uAC8C\uC2DC\uAE00 \uAD00\uB828 \uB9C1\uD06C\uB4E4 in <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net (3S | Slow/Sexy/Sincere SNS)</div>`;\r\n\t\tconst catsSplit = m.recoCats.split(\";\");\r\n\t\tfor (const cat of catsSplit) {\r\n\t\t\tres += `<div class=\"p center\"><a target=\"_blank\" href=\"https://recoeve.net/user/${m.recoeveUserId ? decodeURIComponent(m.recoeveUserId) : \"kipid\"}/mode/multireco?cat=${encodeURIComponent(cat)}#numbers-of-recos\">Cat=${m.escapeOnlyTag(decodeURIComponent(cat))} of ${m.recoeveUserId ? m.escapeOnlyTag(decodeURIComponent(m.recoeveUserId)) : \"kipid\"}'s <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net</a></div>\r\n<div class=\"rC recoeve\"><div class=\"rSC\">\r\n<iframe delayed-src=\"https://recoeve.net/user/${m.recoeveUserId ? encodeURIComponent(m.recoeveUserId) : \"kipid\"}/mode/multireco?cat=${encodeURIComponent(cat)}#numbers-of-recos\" frameborder=\"0\"></iframe>\r\n</div></div>\r\n</div>\r\n<div class=\"button toggle-a-mess fRight cBoth order\" onclick=\"k.toggleAMess(this)\">Toggle <span class=\"bold underline\">a</span> mess</div>\r\n<div class=\"cBoth\"></div>`;\r\n\t\t}\r\n\t}\r\n\tres += `<div class=\"docuK-con\">\r\n<div class=\"order\">\r\n\t<div class=\"center\" style=\"margin-top:5rem\">* \uD64D\uBCF4/Promoting <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net (3S | Slow/Sexy/Sincere SNS)</div>\r\n\t<div class=\"bcf\"><a target=\"_blank\" href=\"https://recoeve.net/user/kipid?cat=%5BMusic%2FBreak%5D--K-Pop#headPlay\">\uC720\uD29C\uBE0C \uC74C\uC545, K-Pop MV \uB4E4\uC744 \uAD11\uACE0\uC5C6\uC774 \uBAA9\uB85D\uC7AC\uC0DD</a> \uD574\uC11C \uBCF4\uC138\uC694.<br/>\r\n\t\t\uC811\uC18D\uD558\uC154\uC11C \uAC00\uC785 \uD6C4 \uBCC4\uC810\uB9CC \uB4DC\uB808\uADF8 \uD558\uC2DC\uBA74 \uC790\uC2E0\uC758 \uD398\uC774\uC9C0\uC5D0 \uC800\uC7A5 \uB429\uB2C8\uB2E4.<br/>\r\n\t\t\uADF8\uB9AC\uACE0 \uC790\uC2E0\uC758 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\uD55C \uB4A4 \uCD94\uCC9C \uBC1B\uAE30 (\uB2E8\uCD95\uD0A4 R) \uB97C \uB204\uB974\uC2DC\uBA74 \uC790\uC2E0\uC774 \uC810\uC218 \uBA54\uAE34\uAC83\uB4E4\uB85C \uC774\uC6C3 (\uC774\uC6C3\uBCF4\uAE30 \uB2E8\uCD95\uD0A4 B) \uC744 \uC790\uB3D9\uC73C\uB85C \uCC3E\uC544\uC8FC\uACE0 \uADF8 \uC774\uC6C3\uB4E4\uB85C\uBD80\uD130 \uCD94\uCC9C\uC744 \uBC1B\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</div>\r\n\t<div class=\"center\" style=\"margin-top:1rem\"><a target=\"_blank\" href=\"https://recoeve.net/user/kipid?cat=%5BMusic%2FBreak%5D--K-Pop#headPlay\">Cat=[Music/Break]--K-Pop of kipid's <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net</a></div>\r\n\t<div class=\"rC recoeve\"><div class=\"rSC\">\r\n\t<iframe delayed-src=\"https://recoeve.net/user/kipid?cat=%5BMusic%2FBreak%5D--K-Pop#headPlay\" frameborder=\"0\"></iframe>\r\n\t</div></div>\r\n</div>\r\n<div class=\"button toggle-a-mess fRight cBoth order\" onclick=\"k.toggleAMess(this)\">Toggle <span class=\"bold underline\">a</span> mess</div>\r\n<div class=\"cBoth\"></div>\r\n<div class=\"order\">\r\n\t<div class=\"center\" style=\"margin-top:5rem\">* \uD64D\uBCF4/Promoting <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net (3S | Slow/Sexy/Sincere SNS)</div>\r\n\t<div class=\"bcf\"><a target=\"_blank\" href=\"https://recoeve.net/user/kipid/mode/multireco?cat=%5BMusic%2FBreak%5D--Pet#numbers-of-recos\">\uCE04\uCE04\uC640 \uB8E8\uB8E8 (\uD3EC\uBA54\uB77C\uB2C8\uC548 6\uC138/3.5kg, 3\uAC1C\uC6D4/1.2kg) \uC758 \uC0AC\uC9C4/\uB3D9\uC601\uC0C1\uB4E4\uC744 \uBAA8\uC544</a> \uBCF4\uC138\uC694.<br/>\r\n\t\uC811\uC18D\uD558\uC154\uC11C \uAC00\uC785 \uD6C4 \uBCC4\uC810\uB9CC \uB4DC\uB808\uADF8 \uD558\uC2DC\uBA74 \uC790\uC2E0\uC758 \uD398\uC774\uC9C0\uC5D0 \uC800\uC7A5 \uB429\uB2C8\uB2E4.<br/>\r\n\t\uADF8\uB9AC\uACE0 \uC790\uC2E0\uC758 \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\uD55C \uB4A4 \uCD94\uCC9C \uBC1B\uAE30 (\uB2E8\uCD95\uD0A4 R) \uB97C \uB204\uB974\uC2DC\uBA74 \uC790\uC2E0\uC774 \uC810\uC218 \uBA54\uAE34\uAC83\uB4E4\uB85C \uC774\uC6C3 (\uC774\uC6C3\uBCF4\uAE30 \uB2E8\uCD95\uD0A4 B) \uC744 \uC790\uB3D9\uC73C\uB85C \uCC3E\uC544\uC8FC\uACE0 \uADF8 \uC774\uC6C3\uB4E4\uB85C\uBD80\uD130 \uCD94\uCC9C\uC744 \uBC1B\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.</div>\r\n\t<div class=\"center\" style=\"margin-top:1rem\"><a target=\"_blank\" href=\"https://recoeve.net/user/kipid/mode/multireco?cat=%5BMusic%2FBreak%5D--Pet#numbers-of-recos\">Cat=[Music/Break]--Pet of kipid's <span style=\"color:rgb(255,180,180)\">Reco</span><span style=\"color:rgb(100,100,255)\">eve</span>.net</a></div>\r\n\t<div class=\"rC recoeve\"><div class=\"rSC\">\r\n\t<iframe delayed-src=\"https://recoeve.net/user/kipid/mode/multireco?cat=%5BMusic%2FBreak%5D--Pet#numbers-of-recos\" frameborder=\"0\"></iframe>\r\n\t</div></div>\r\n</div>\r\n<div class=\"button toggle-a-mess fRight cBoth order\" onclick=\"k.toggleAMess(this)\">Toggle <span class=\"bold underline\">a</span> mess</div>\r\n<div class=\"cBoth\"></div></div>`;\r\n\treturn res;\r\n};\r\n\r\n// logPrint function.\r\nm.$log = $(\"#docuK-log\");\r\nm.$log.addClass(\"fixed\");\r\nm.$log.before(`<div class=\"docuK-log exit\" onclick=\"k.$window.trigger({type:'keydown', code:'KeyK'})\"><svg><g style=\"stroke:white;stroke-width:23%\"><line x1=\"20%\" y1=\"20%\" x2=\"80%\" y2=\"80%\"></line><line x1=\"80%\" y1=\"20%\" x2=\"20%\" y2=\"80%\"></line></g>\u2716</svg></div>`);\r\nm.$logAll = $(\"#docuK-log, .docuK-log.exit\");\r\nm.logPrint = function (str: string): void {\r\n\tm.$log.append(str);\r\n\tm.$log.scrollTop(m.$log[0].scrollHeight);\r\n};\r\nm.logPrint(`m.logPrint() is working!`);\r\nm.$log.after(`<div class=\"fs-container\" id=\"fuzzy-search-container\" style=\"display:none\">\r\n<div class=\"fs-name\">Go: Fuzzy search</div>\r\n<div class=\"move\" style=\"z-index:20000; position:absolute; display:inline-block; left:0; top:0; width:1.8rem; height:1.8rem; line-height:1.0; text-align:center; cursor:pointer; border:2px rgb(80, 80, 80) solid; background-color:rgb(30,30,30); color:white\"><svg style=\"display:inline-block; width:100%; height:100%\"><g style=\"stroke:white; stroke-width:10%; stroke-linecap:round\">\r\n<line x1=\"10%\" y1=\"50%\" x2=\"90%\" y2=\"50%\"></line>\r\n<line x1=\"10%\" y1=\"50%\" x2=\"20%\" y2=\"40%\"></line>\r\n<line x1=\"10%\" y1=\"50%\" x2=\"20%\" y2=\"60%\"></line>\r\n<line x1=\"80%\" y1=\"40%\" x2=\"90%\" y2=\"50%\"></line>\r\n<line x1=\"80%\" y1=\"60%\" x2=\"90%\" y2=\"50%\"></line>\r\n<line x1=\"50%\" y1=\"10%\" x2=\"50%\" y2=\"90%\"></line>\r\n<line x1=\"50%\" y1=\"10%\" x2=\"40%\" y2=\"20%\"></line>\r\n<line x1=\"50%\" y1=\"10%\" x2=\"60%\" y2=\"20%\"></line>\r\n<line x1=\"40%\" y1=\"80%\" x2=\"50%\" y2=\"90%\"></line>\r\n<line x1=\"60%\" y1=\"80%\" x2=\"50%\" y2=\"90%\"></line>\r\n</g></svg></div>\r\n<textarea class=\"fs-input single-line\" id=\"fuzzy-search\"></textarea>\r\n<div class=\"fs-list\" id=\"fuzzy-search-list\"></div>\r\n<div class=\"reset\" style=\"z-index:20000; position:absolute; display:inline-block; right:1.8rem; top:0; width:1.8rem; height:1.8rem; line-height:1.0; text-align:center; cursor:pointer; border:2px rgb(80, 80, 80) solid; background-color:rgb(30,30,30); color:white\"><svg style=\"display:inline-block; width:100%; height:100%\"><g style=\"stroke:white; stroke-width:10%; stroke-linecap:round\">\r\n<line x1=\"20%\" y1=\"30%\" x2=\"80%\" y2=\"30%\"></line>\r\n<line x1=\"80%\" y1=\"30%\" x2=\"80%\" y2=\"70%\"></line>\r\n<line x1=\"80%\" y1=\"70%\" x2=\"20%\" y2=\"70%\"></line>\r\n<line x1=\"20%\" y1=\"70%\" x2=\"30%\" y2=\"60%\"></line>\r\n<line x1=\"20%\" y1=\"70%\" x2=\"30%\" y2=\"80%\"></line>\r\n</g></svg></div>\r\n<div class=\"exit\" onclick=\"k.$window.trigger({type:'keydown', code:'KeyG'})\"><svg><g style=\"stroke:white;stroke-width:23%\"><line x1=\"20%\" y1=\"20%\" x2=\"80%\" y2=\"80%\"></line><line x1=\"80%\" y1=\"20%\" x2=\"20%\" y2=\"80%\"></line></g>\u2716</svg></div>\r\n</div>\r\n<a id=\"out-focus\" class=\"none\">out focus</a>`);\r\n\r\nwindow.$out_focus = $(\"#out-focus\");\r\nwindow.$fuzzy_search_container = $(\"#fuzzy-search-container\");\r\nwindow.$fuzzy_search_container_move = $(\"#fuzzy-search-container>.move\");\r\nwindow.$fuzzy_search = $(\"#fuzzy-search\");\r\nwindow.$fuzzy_search_list = $(\"#fuzzy-search-list\");\r\n\r\nwindow.$fuzzy_search_container_move.on(\"mousedown.move touchstart.move\", function (e) {\r\n\tlet touch0 = e.type === \"touchstart\" ? (e as any).originalEvent.touches[0] : e;\r\n\tlet relativeX = touch0.clientX - Math.round(window.$fuzzy_search_container_move.offset().left) + m.$window.scrollLeft();\r\n\tlet relativeY = touch0.clientY - Math.round(window.$fuzzy_search_container_move.offset().top) + m.$window.scrollTop();\r\n\tm.$html.on(\"mousemove.move touchmove.move\", function (e) {\r\n\t\twindow.getSelection().removeAllRanges();\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tlet touch0 = e.type === \"touchmove\" ? (e as any).originalEvent.touches[0] : e;\r\n\t\twindow.$fuzzy_search_container.css({\r\n\t\t\tleft: touch0.clientX - relativeX,\r\n\t\t\ttop: touch0.clientY - relativeY,\r\n\t\t});\r\n\t\tm.$html.on(\"mouseup.move touchend.move\", function () {\r\n\t\t\tm.$html.off(\"mouseup.move touchend.move mousemove.move touchmove.move\");\r\n\t\t});\r\n\t});\r\n});\r\n\r\n$(\"#fuzzy-search-container>.reset\").on(\"click.reset\", function (e) {\r\n\t(window.$fuzzy_search as JQuery<HTMLTextAreaElement>)[0].value = \"\";\r\n\t(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).focus();\r\n\t(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).trigger(\"keyup.fs\");\r\n});\r\n\r\n// Fuzzy Search\r\n////////////////////////////////////////////////////\r\n// Hangul (Korean) split and map to English\r\n// KE : Korean Expanded\r\n////////////////////////////////////////////////////\r\nm.jamoKE = [\"\u3131\", \"\u3131\u3131\", \"\u3131\u3145\", \"\u3134\", \"\u3134\u3148\", \"\u3134\u314E\", \"\u3137\", \"\u3137\u3137\", \"\u3139\", \"\u3139\u3131\", \"\u3139\u3141\", \"\u3139\u3142\", \"\u3139\u3145\", \"\u3139\u314C\", \"\u3139\u314D\", \"\u3139\u314E\", \"\u3141\", \"\u3142\", \"\u3142\u3142\", \"\u3142\u3145\", \"\u3145\", \"\u3145\u3145\", \"\u3147\", \"\u3148\", \"\u3148\u3148\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\", \"\u314F\", \"\u3150\", \"\u3151\", \"\u3152\", \"\u3153\", \"\u3154\", \"\u3155\", \"\u3156\", \"\u3157\", \"\u3157\u314F\", \"\u3157\u3150\", \"\u3157\u3163\", \"\u315B\", \"\u315C\", \"\u315C\u3153\", \"\u315C\u3154\", \"\u315C\u3163\", \"\u3160\", \"\u3161\", \"\u3161\u3163\", \"\u3163\"];\r\nm.jamo = [\"\u3131\", \"\u3132\", \"\u3133\", \"\u3134\", \"\u3135\", \"\u3136\", \"\u3137\", \"\u3138\", \"\u3139\", \"\u313A\", \"\u313B\", \"\u313C\", \"\u313D\", \"\u313E\", \"\u313F\", \"\u3140\", \"\u3141\", \"\u3142\", \"\u3143\", \"\u3144\", \"\u3145\", \"\u3146\", \"\u3147\", \"\u3148\", \"\u3149\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\", \"\u314F\", \"\u3150\", \"\u3151\", \"\u3152\", \"\u3153\", \"\u3154\", \"\u3155\", \"\u3156\", \"\u3157\", \"\u3158\", \"\u3159\", \"\u315A\", \"\u315B\", \"\u315C\", \"\u315D\", \"\u315E\", \"\u315F\", \"\u3160\", \"\u3161\", \"\u3162\", \"\u3163\"];\r\n\r\nm.mapKE = {\r\n\tq: \"\u3142\",\r\n\tQ: \"\u3143\",\r\n\tw: \"\u3148\",\r\n\tW: \"\u3149\",\r\n\te: \"\u3137\",\r\n\tE: \"\u3138\",\r\n\tr: \"\u3131\",\r\n\tR: \"\u3132\",\r\n\tt: \"\u3145\",\r\n\tT: \"\u3146\",\r\n\ty: \"\u315B\",\r\n\tY: \"\u315B\",\r\n\tu: \"\u3155\",\r\n\tU: \"\u3155\",\r\n\ti: \"\u3151\",\r\n\tI: \"\u3151\",\r\n\to: \"\u3150\",\r\n\tO: \"\u3152\",\r\n\tp: \"\u3154\",\r\n\tP: \"\u3156\",\r\n\ta: \"\u3141\",\r\n\tA: \"\u3141\",\r\n\ts: \"\u3134\",\r\n\tS: \"\u3134\",\r\n\td: \"\u3147\",\r\n\tD: \"\u3147\",\r\n\tf: \"\u3139\",\r\n\tF: \"\u3139\",\r\n\tg: \"\u314E\",\r\n\tG: \"\u314E\",\r\n\th: \"\u3157\",\r\n\tH: \"\u3157\",\r\n\tj: \"\u3153\",\r\n\tJ: \"\u3153\",\r\n\tk: \"\u314F\",\r\n\tK: \"\u314F\",\r\n\tl: \"\u3163\",\r\n\tL: \"\u3163\",\r\n\tz: \"\u314B\",\r\n\tZ: \"\u314B\",\r\n\tx: \"\u314C\",\r\n\tX: \"\u314C\",\r\n\tc: \"\u314A\",\r\n\tC: \"\u314A\",\r\n\tv: \"\u314D\",\r\n\tV: \"\u314D\",\r\n\tb: \"\u3160\",\r\n\tB: \"\u3160\",\r\n\tn: \"\u315C\",\r\n\tN: \"\u315C\",\r\n\tm: \"\u3161\",\r\n\tM: \"\u3161\",\r\n};\r\nfor (let p in m.mapKE) {\r\n\tm.mapKE[m.mapKE[p]] = p; // Add reversed mapping.\r\n}\r\n\r\nm.rChoKE = [\"\u3131\", \"\u3131\u3131\", \"\u3134\", \"\u3137\", \"\u3137\u3137\", \"\u3139\", \"\u3141\", \"\u3142\", \"\u3142\u3142\", \"\u3145\", \"\u3145\u3145\", \"\u3147\", \"\u3148\", \"\u3148\u3148\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\"];\r\nm.rCho = [\"\u3131\", \"\u3132\", \"\u3134\", \"\u3137\", \"\u3138\", \"\u3139\", \"\u3141\", \"\u3142\", \"\u3143\", \"\u3145\", \"\u3146\", \"\u3147\", \"\u3148\", \"\u3149\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\"];\r\n\r\nm.rJungKE = [\"\u314F\", \"\u3150\", \"\u3151\", \"\u3152\", \"\u3153\", \"\u3154\", \"\u3155\", \"\u3156\", \"\u3157\", \"\u3157\u314F\", \"\u3157\u3150\", \"\u3157\u3163\", \"\u315B\", \"\u315C\", \"\u315C\u3153\", \"\u315C\u3154\", \"\u315C\u3163\", \"\u3160\", \"\u3161\", \"\u3161\u3163\", \"\u3163\"];\r\nm.rJung = [\"\u314F\", \"\u3150\", \"\u3151\", \"\u3152\", \"\u3153\", \"\u3154\", \"\u3155\", \"\u3156\", \"\u3157\", \"\u3158\", \"\u3159\", \"\u315A\", \"\u315B\", \"\u315C\", \"\u315D\", \"\u315E\", \"\u315F\", \"\u3160\", \"\u3161\", \"\u3162\", \"\u3163\"];\r\n\r\nm.rJongKE = [\"\", \"\u3131\", \"\u3131\u3131\", \"\u3131\u3145\", \"\u3134\", \"\u3134\u3148\", \"\u3134\u314E\", \"\u3137\", \"\u3139\", \"\u3139\u3131\", \"\u3139\u3141\", \"\u3139\u3142\", \"\u3139\u3145\", \"\u3139\u314C\", \"\u3139\u314D\", \"\u3139\u314E\", \"\u3141\", \"\u3142\", \"\u3142\u3145\", \"\u3145\", \"\u3145\u3145\", \"\u3147\", \"\u3148\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\"];\r\nm.rJong = [\"\", \"\u3131\", \"\u3132\", \"\u3133\", \"\u3134\", \"\u3135\", \"\u3136\", \"\u3137\", \"\u3139\", \"\u313A\", \"\u313B\", \"\u313C\", \"\u313D\", \"\u313E\", \"\u313F\", \"\u3140\", \"\u3141\", \"\u3142\", \"\u3144\", \"\u3145\", \"\u3146\", \"\u3147\", \"\u3148\", \"\u314A\", \"\u314B\", \"\u314C\", \"\u314D\", \"\u314E\"];\r\n\r\nm.splitHangul = function (str: string): SplitHangul {\r\n\tlet res: SplitHangul = {\r\n\t\tarray: [],\r\n\t\toriginalStr: str,\r\n\t\tsplitted3: \"\",\r\n\t\tsplitted: \"\",\r\n\t\tpCho: [], // position of word-start or \uCD08\uC131\r\n\t};\r\n\tlet p = 0;\r\n\tres.pCho[p] = true;\r\n\tlet cho: number, jung: number, jong: number;\r\n\tfor (let i = 0; i < str.length; i++) {\r\n\t\tlet c: string = str.charAt(i);\r\n\t\tlet n: number = str.charCodeAt(i);\r\n\t\tif (n >= 0x3131 && n <= 0x3163) {\r\n\t\t\tn -= 0x3131;\r\n\t\t\tres.array[i] = { char: c, splitted3: c, splitted: m.jamoKE[n] };\r\n\t\t\tres.pCho[p] = true;\r\n\t\t} else if (n >= 0xac00 && n <= 0xd7a3) {\r\n\t\t\tn -= 0xac00;\r\n\t\t\tjong = n % 28;\r\n\t\t\tjung = ((n - jong) / 28) % 21;\r\n\t\t\tcho = ((n - jong) / 28 - jung) / 21;\r\n\t\t\tres.array[i] = {\r\n\t\t\t\tchar: c,\r\n\t\t\t\tsplitted3: m.rCho[cho] + m.rJung[jung] + m.rJong[jong],\r\n\t\t\t\tsplitted: m.rChoKE[cho] + m.rJungKE[jung] + m.rJongKE[jong],\r\n\t\t\t};\r\n\t\t\tres.pCho[p] = true;\r\n\t\t} else {\r\n\t\t\tres.array[i] = { char: c, splitted3: c, splitted: c };\r\n\t\t\tif (i > 0 && /[^a-zA-Z0-9]$/.test(res.array[i - 1].splitted) && /[a-zA-Z0-9]/.test(c)) {\r\n\t\t\t\tres.pCho[p] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tp += res.array[i].splitted.length;\r\n\t\tres.splitted3 += res.array[i].splitted3;\r\n\t\tres.splitted += res.array[i].splitted;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\n////////////////////////////////////////////////////\r\n// Fuzzy search prepare\r\n////////////////////////////////////////////////////\r\nm.fsLength = 300;\r\nm.fsGo = {\r\n\tarray: [{ ptnSH: m.splitHangul(\"$!@#\") }, { ptnSH: m.splitHangul(\"$!@#\") }],\r\n\tfullList: [],\r\n\t$fs: window.$fuzzy_search as JQuery<HTMLTextAreaElement>,\r\n\t$fsl: window.$fuzzy_search_list,\r\n\t$fsLis: window.$fuzzy_search_list.find(\".list-item\"),\r\n\tshuffled: false,\r\n};\r\nm.quote = function (str: string): string {\r\n\treturn str.replace(/[.?*+^$[\\]\\\\{}()|-]/g, \"\\\\$&\").replace(/\\s/g, \"[\\\\s\\\\S]\");\r\n};\r\nm.spaceRegExpStr = new RegExp(m.quote(\" \"), \"ig\").toString();\r\nm.arrayRegExs = function (ptnSH: SplitHangul): RegExp[] {\r\n\tlet str = ptnSH.splitted;\r\n\tlet res: RegExp[] = [];\r\n\tfor (let i = 0; i < str.length; i++) {\r\n\t\tlet c: string = str.charAt(i);\r\n\t\tlet mapKE: string | undefined = m.mapKE[c];\r\n\t\tif (mapKE) {\r\n\t\t\tres.push(new RegExp(\"[\" + c + mapKE + \"]\", \"ig\"));\r\n\t\t} else {\r\n\t\t\tres.push(new RegExp(m.quote(c), \"ig\"));\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\nm.highlightStrFromIndices = function (strSplitted: SplitHangul, indices: { start: number; end: number }[]): string {\r\n\tlet res = \"\";\r\n\tfor (let i = 0, j = 1, k = 0, p1 = 0, p2 = 0; j <= indices.length; i = j, j++) {\r\n\t\twhile (j < indices.length && indices[j - 1].end === indices[j].start) {\r\n\t\t\tj++;\r\n\t\t}\r\n\t\tfor (; k < strSplitted.array.length; k++) {\r\n\t\t\tp1 = p2;\r\n\t\t\tp2 = p1 + strSplitted.array[k].splitted.length;\r\n\t\t\tif (p2 <= indices[i].start) {\r\n\t\t\t\tstrSplitted.array[k].matched = false;\r\n\t\t\t} else if (p1 < indices[j - 1].end) {\r\n\t\t\t\tstrSplitted.array[k].matched = true;\r\n\t\t\t} else {\r\n\t\t\t\tif (j === indices.length) {\r\n\t\t\t\t\tfor (; k < strSplitted.array.length; k++) {\r\n\t\t\t\t\t\tstrSplitted.array[k].matched = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tp2 = p1;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor (let i = 0; i < strSplitted.array.length; ) {\r\n\t\tif (strSplitted.array[i].matched) {\r\n\t\t\tres += '<span class=\"bold\">';\r\n\t\t\twhile (i < strSplitted.array.length && strSplitted.array[i].matched) {\r\n\t\t\t\tres += m.escapeOnlyTag(strSplitted.array[i].char);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tres += \"</span>\";\r\n\t\t} else {\r\n\t\t\twhile (i < strSplitted.array.length && !strSplitted.array[i].matched) {\r\n\t\t\t\tres += m.escapeOnlyTag(strSplitted.array[i].char);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\nm.matchScoreFromIndices = function (strSH: SplitHangul, ptnSH: SplitHangul, indices: { start: number; end: number }[]): number {\r\n\tlet res = 0;\r\n\tfor (let i = 0; i < indices.length; i++) {\r\n\t\tif (strSH.pCho[indices[i].start]) res += 15;\r\n\t}\r\n\tfor (let i = 1; i < indices.length; i++) {\r\n\t\tlet diff = indices[i].start - indices[i - 1].start;\r\n\t\tif (diff < 5) res += 8 * (5 - diff);\r\n\t}\r\n\treturn res;\r\n};\r\nm.fuzzySearch = function (ptnSH: SplitHangul, fs: FuzzySearch): FuzzySearchResult {\r\n\tif (ptnSH.splitted === fs.array[0].ptnSH.splitted) {\r\n\t\treturn fs.array[0];\r\n\t}\r\n\tif (ptnSH.splitted.indexOf(fs.array[0].ptnSH.splitted) >= 0) {\r\n\t\tfs.array[1] = fs.array[0];\r\n\t} else if (fs.array[1] && ptnSH.splitted.indexOf(fs.array[1].ptnSH.splitted) >= 0) {\r\n\t\tif (ptnSH.splitted === fs.array[1].ptnSH.splitted) {\r\n\t\t\treturn fs.array[1];\r\n\t\t}\r\n\t} else {\r\n\t\tfs.array[1] = null;\r\n\t}\r\n\tlet list = [];\r\n\tif (fs.array[1] && fs.array[1].sorted) {\r\n\t\tlet sorted = fs.array[1].sorted;\r\n\t\tfor (let i = 0; i < sorted.length; i++) {\r\n\t\t\tlist.push(fs.fullList[fs.array[1].array[sorted[i]].i]);\r\n\t\t}\r\n\t} else {\r\n\t\tif (fs.shuffled) {\r\n\t\t\tlet shuffled = fs.shuffled;\r\n\t\t\tfor (let i = 0; i < shuffled.length; i++) {\r\n\t\t\t\tlist.push(fs.fullList[shuffled[i].i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet l = fs.fullList.length;\r\n\t\t\tfor (let i = 0; i < l; i++) {\r\n\t\t\t\tlist.push(fs.fullList[l - 1 - i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfs.array[0] = { ptnSH, array: [] };\r\n\tlet regExs = m.arrayRegExs(ptnSH);\r\n\tlet regExsReversed = [];\r\n\tfor (let i = 0; i < regExs.length; i++) {\r\n\t\tregExsReversed[i] = regExs[regExs.length - 1 - i];\r\n\t}\r\n\tfor (let i = 0; i < list.length; i++) {\r\n\t\tlet listI = list[i];\r\n\t\tif (regExs.length > 0) {\r\n\t\t\tlet txt = listI.txt;\r\n\t\t\tlet txtS = txt.splitted;\r\n\t\t\tlet txtSReversed = txtS.split(\"\").reverse().join(\"\");\r\n\t\t\tregExs[0].lastIndex = 0;\r\n\t\t\tlet exec = regExs[0].exec(txtS);\r\n\t\t\tlet matched = exec !== null;\r\n\t\t\tlet indices = [];\r\n\t\t\tif (matched) {\r\n\t\t\t\tindices[0] = { start: exec.index, end: regExs[0].lastIndex };\r\n\t\t\t}\r\n\t\t\tfor (let j = 1; matched && j < regExs.length; j++) {\r\n\t\t\t\tregExs[j].lastIndex = regExs[j - 1].lastIndex;\r\n\t\t\t\texec = regExs[j].exec(txtS);\r\n\t\t\t\tmatched = exec !== null;\r\n\t\t\t\tif (matched) {\r\n\t\t\t\t\tindices[j] = { start: exec.index, end: regExs[j].lastIndex };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet maxMatchScore = 0;\r\n\t\t\tif (matched) {\r\n\t\t\t\tmaxMatchScore = m.matchScoreFromIndices(txt, ptnSH, indices);\r\n\t\t\t\tlet indicesMMS = []; // indices of max match score\r\n\t\t\t\tfor (let p = 0; p < indices.length; p++) {\r\n\t\t\t\t\tindicesMMS[p] = indices[p]; // hard copy of indices\r\n\t\t\t\t}\r\n\t\t\t\tif (txt.array.length < m.fsLength) {\r\n\t\t\t\t\tfor (let k = indices.length - 1; k >= 0; ) {\r\n\t\t\t\t\t\tif (regExs[k].toString() === m.spaceRegExpStr) {\r\n\t\t\t\t\t\t\tk--;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tregExs[k].lastIndex = indices[k].start + 1;\r\n\t\t\t\t\t\texec = regExs[k].exec(txtS);\r\n\t\t\t\t\t\tmatched = exec !== null;\r\n\t\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\t\tindices[k] = { start: exec.index, end: regExs[k].lastIndex };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let j = k + 1; matched && j < regExs.length; j++) {\r\n\t\t\t\t\t\t\tregExs[j].lastIndex = regExs[j - 1].lastIndex;\r\n\t\t\t\t\t\t\texec = regExs[j].exec(txtS);\r\n\t\t\t\t\t\t\tmatched = exec !== null;\r\n\t\t\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\t\t\tindices[j] = { start: exec.index, end: regExs[j].lastIndex };\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\t\tlet matchScore = m.matchScoreFromIndices(txt, ptnSH, indices);\r\n\t\t\t\t\t\t\tif (matchScore > maxMatchScore) {\r\n\t\t\t\t\t\t\t\tmaxMatchScore = matchScore;\r\n\t\t\t\t\t\t\t\tindicesMMS = [];\r\n\t\t\t\t\t\t\t\tfor (let p = 0; p < indices.length; p++) {\r\n\t\t\t\t\t\t\t\t\tindicesMMS[p] = indices[p]; // hard copy of indices\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tk = indices.length - 2;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tk--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Reverse match and compare only two results.\r\n\t\t\t\t\tregExsReversed[0].lastIndex = 0;\r\n\t\t\t\t\texec = regExsReversed[0].exec(txtSReversed);\r\n\t\t\t\t\tmatched = exec !== null;\r\n\t\t\t\t\tlet indicesReversed = [];\r\n\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\tindicesReversed[0] = {\r\n\t\t\t\t\t\t\tstart: exec.index,\r\n\t\t\t\t\t\t\tend: regExsReversed[0].lastIndex,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let j = 1; matched && j < regExsReversed.length; j++) {\r\n\t\t\t\t\t\tregExsReversed[j].lastIndex = regExsReversed[j - 1].lastIndex;\r\n\t\t\t\t\t\texec = regExsReversed[j].exec(txtSReversed);\r\n\t\t\t\t\t\tmatched = exec !== null;\r\n\t\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\t\tindicesReversed[j] = {\r\n\t\t\t\t\t\t\t\tstart: exec.index,\r\n\t\t\t\t\t\t\t\tend: regExsReversed[j].lastIndex,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (matched) {\r\n\t\t\t\t\t\tindices = [];\r\n\t\t\t\t\t\tfor (let j = 0; j < indicesReversed.length; j++) {\r\n\t\t\t\t\t\t\tlet iR = indicesReversed[indicesReversed.length - 1 - j];\r\n\t\t\t\t\t\t\tindices[j] = {\r\n\t\t\t\t\t\t\t\tstart: txtSReversed.length - iR.end,\r\n\t\t\t\t\t\t\t\tend: txtSReversed.length - iR.start,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet matchScore = m.matchScoreFromIndices(txt, ptnSH, indices);\r\n\t\t\t\t\t\tif (matchScore > maxMatchScore) {\r\n\t\t\t\t\t\t\tmaxMatchScore = matchScore;\r\n\t\t\t\t\t\t\tindicesMMS = indices;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfs.array[0].array.push({\r\n\t\t\t\t\ti: listI.i,\r\n\t\t\t\t\tmaxMatchScore: maxMatchScore,\r\n\t\t\t\t\thighlight: m.highlightStrFromIndices(txt, indicesMMS),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfs.array[0].array.push({ i: listI.i, maxMatchScore: 0 });\r\n\t\t}\r\n\t}\r\n\tlet sorted: number[] = (fs.array[0].sorted = []);\r\n\tfor (let i = 0; i < fs.array[0].array.length; i++) {\r\n\t\t// sorted[i]=fs[0].length-1-i;\r\n\t\t// sorted[i]=i;\r\n\t\tsorted.push(i);\r\n\t}\r\n\tfor (let i = 1; i < sorted.length; i++) {\r\n\t\tlet temp = sorted[i];\r\n\t\tlet j = i;\r\n\t\tfor (; j > 0 && fs.array[0].array[sorted[j - 1]].maxMatchScore < fs.array[0].array[temp].maxMatchScore; j--) {\r\n\t\t\tsorted[j] = sorted[j - 1];\r\n\t\t}\r\n\t\tsorted[j] = temp;\r\n\t}\r\n\treturn fs.array[0];\r\n};\r\n\r\n(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).on(\"keydown.fs-move-exit\", function (e: any) {\r\n\te.stopPropagation();\r\n\tswitch (e.code) {\r\n\t\tcase \"Escape\": // ESC=27\r\n\t\t\te.preventDefault();\r\n\t\t\tm.$window.trigger({ type: \"keydown\", code: \"KeyG\" } as any); // G=71\r\n\t\t\tbreak;\r\n\t\tcase \"ArrowUp\": // up=38\r\n\t\tcase \"ArrowDown\": // down=40\r\n\t\t\te.preventDefault();\r\n\t\t\tlet $fsl = window.$fuzzy_search_list;\r\n\t\t\tlet $lis = $fsl.find(\".list-item\");\r\n\t\t\tlet $liSelected = $fsl.find(\".list-item.selected\").eq(0);\r\n\t\t\tlet $liTo = null;\r\n\t\t\tif ($liSelected.length) {\r\n\t\t\t\tif (e.code === \"ArrowUp\") {\r\n\t\t\t\t\t$liTo = $liSelected.prev();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$liTo = $liSelected.next();\r\n\t\t\t\t}\r\n\t\t\t\tif ($liTo.length) {\r\n\t\t\t\t\t$liTo.eq(0).trigger(\"click\");\r\n\t\t\t\t\tif ($liTo.offset().top < $fsl.offset().top + 2) {\r\n\t\t\t\t\t\t// $liTo at upside of scroll.\r\n\t\t\t\t\t\t$fsl.scrollTop($fsl.scrollTop() + $liTo.offset().top - $fsl.offset().top - 2);\r\n\t\t\t\t\t} else if ($liTo.offset().top + $liTo.outerHeight() > $fsl.offset().top + $fsl.height() + 2) {\r\n\t\t\t\t\t\t// $liTo at downside of scroll.\r\n\t\t\t\t\t\t$fsl.scrollTop($fsl.scrollTop() + $liTo.offset().top + $liTo.outerHeight() - $fsl.offset().top - $fsl.height() - 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ($lis.length) {\r\n\t\t\t\t\tif (e.code === \"ArrowUp\") {\r\n\t\t\t\t\t\t$liTo = $lis.last();\r\n\t\t\t\t\t\t$fsl.scrollTop($fsl[0].scrollHeight);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$liTo = $lis.first();\r\n\t\t\t\t\t\t$fsl.scrollTop(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$liTo.eq(0).trigger(\"click\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n});\r\nm.gotoLi = function (e: any, elem: HTMLElement, k: number, fs: FuzzySearch): void {\r\n\tif (e && e.srcElement && e.srcElement.nodeName == \"A\") {\r\n\t\treturn;\r\n\t}\r\n\tlet $elem = $(elem);\r\n\t$elem = $elem.closest(\".list-item\");\r\n\tif ($elem.hasClass(\"selected\")) {\r\n\t\t(fs.$fs as JQuery<HTMLTextAreaElement>).trigger({\r\n\t\t\ttype: \"keydown\",\r\n\t\t\tcode: \"Escape\",\r\n\t\t} as any);\r\n\t} else {\r\n\t\tfs.$fsLis.removeClass(\"selected\");\r\n\t\t$elem.addClass(\"selected\");\r\n\t}\r\n\tlet $listI = fs.fullList[k].$listI;\r\n\tif ($listI) {\r\n\t\tif (!$listI.is(\":visible\")) {\r\n\t\t\t$listI.parents(\"*\").show();\r\n\t\t}\r\n\t\tm.$window.scrollTop($listI.offset().top);\r\n\t}\r\n};\r\nm.doFSGo = function (fs: FuzzySearch): void {\r\n\tlet fsPtnSH = m.splitHangul(fs.$fs[0].value);\r\n\tif (fs.array[0].ptnSH.splitted !== fsPtnSH.splitted) {\r\n\t\tlet res = m.fuzzySearch(fsPtnSH, fs);\r\n\t\tlet sorted = res.sorted;\r\n\t\tlet str = \"\";\r\n\t\tfor (let i = 0; i < sorted.length; i++) {\r\n\t\t\tlet k = res.array[sorted[i]].i;\r\n\t\t\tlet fsFLk = fs.fullList[k];\r\n\t\t\tstr += `<div class=\"list-item\" onclick=\"k.gotoLi(event,this,${k},m.fsGo)\">${fsFLk.html}${res.array[sorted[i]].highlight !== undefined ? `<div class=\"highlighted\"><span class=\"maxMatchScore\">${res.array[sorted[i]].maxMatchScore}</span> :: ${res.array[sorted[i]].highlight}</div>` : \"\"}</div>`;\r\n\t\t}\r\n\t\tfs.$fsl.html(str);\r\n\t\tfs.$fsLis = fs.$fsl.find(\".list-item\");\r\n\t}\r\n};\r\nm.fsGoOn = function (): void {\r\n\tlet now = Date.now();\r\n\tlet passed = now - m.previous;\r\n\tif (passed > m.wait) {\r\n\t\tm.previous = now;\r\n\t\tm.doFSGo(m.fsGo);\r\n\t} else {\r\n\t\t(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).off(\"keyup.fs cut.fs paste.fs\");\r\n\t\tsetTimeout(\r\n\t\t\tfunction () {\r\n\t\t\t\t(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).on(\"keyup.fs cut.fs paste.fs\", m.fsGoOn);\r\n\t\t\t\tm.previous = Date.now();\r\n\t\t\t\tm.doFSGo(m.fsGo);\r\n\t\t\t},\r\n\t\t\tm.wait * 1.5 - passed,\r\n\t\t);\r\n\t}\r\n};\r\n(window.$fuzzy_search as JQuery<HTMLTextAreaElement>).on(\"keyup.fs cut.fs paste.fs\", m.fsGoOn);\r\n\r\n// String to Array\r\nm.encloseStr = function (str: string): string {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn \"\";\r\n\t}\r\n\tif (str.charAt(0) === '\"' || /[\\n\\t]/.test(str)) {\r\n\t\treturn `\"${str.replace(/\"/g, '\"\"')}\"`;\r\n\t}\r\n\treturn str;\r\n};\r\n\r\nm.strToJSON = function (str: string, colMap = true, rowMap = false): Promise<StrToJSON> {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn Promise.reject(str);\r\n\t}\r\n\tif (str.charAt(str.length - 1) !== \"\\n\") {\r\n\t\tstr += \"\\n\";\r\n\t}\r\n\tconst ret: StrToJSON = [];\r\n\tconst delimiter = /([^\\t\\n]*)([\\t\\n])/g;\r\n\tconst lastQuote = /[^\"](?:\"\")*\"([\\t\\n])/g;\r\n\tlet exec: ReturnType<typeof RegExp.prototype.exec>;\r\n\tlet start = 0;\r\n\tlet row = -1,\r\n\t\tcol = -1,\r\n\t\tdelim = \"\\n\";\r\n\tlet strElem = \"\";\r\n\tfunction increaseRC(delim: string): boolean {\r\n\t\tif (delim === \"\\t\") {\r\n\t\t\tcol++;\r\n\t\t\treturn true;\r\n\t\t} else if (delim === \"\\n\") {\r\n\t\t\trow++;\r\n\t\t\tcol = 0;\r\n\t\t\tret.push([]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twhile (start < str.length && increaseRC(delim)) {\r\n\t\tif (str.substring(start, start + 1) === '\"') {\r\n\t\t\tlastQuote.lastIndex = start + 1;\r\n\t\t\tif ((exec = lastQuote.exec(str)) !== null) {\r\n\t\t\t\tstrElem = str.substring(start + 1, lastQuote.lastIndex - 2);\r\n\t\t\t\tdelim = exec[1];\r\n\t\t\t\tstart = delimiter.lastIndex = lastQuote.lastIndex;\r\n\t\t\t} else {\r\n\t\t\t\tstrElem = str.substring(start + 1);\r\n\t\t\t\tdelim = \"\";\r\n\t\t\t\tstart = str.length;\r\n\t\t\t}\r\n\t\t\tstrElem = strElem.replace(/\"\"/g, '\"');\r\n\t\t} else {\r\n\t\t\tif ((exec = delimiter.exec(str)) !== null) {\r\n\t\t\t\tstrElem = exec[1];\r\n\t\t\t\tdelim = exec[2];\r\n\t\t\t\tstart = delimiter.lastIndex;\r\n\t\t\t} else {\r\n\t\t\t\tstrElem = str.substring(start);\r\n\t\t\t\tdelim = \"\";\r\n\t\t\t\tstart = str.length;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret[row][col] = strElem;\r\n\t}\r\n\tif (colMap) {\r\n\t\tconst firstColSize = ret[0].length;\r\n\t\tfor (let i = 0; i < ret.length; i++) {\r\n\t\t\tlet jMax = ret[i].length > firstColSize ? firstColSize : ret[i].length;\r\n\t\t\tfor (let j = 0; j < firstColSize; j++) {\r\n\t\t\t\tlet key = ret[0][j];\r\n\t\t\t\tif (j < jMax) {\r\n\t\t\t\t\tret[i][key] = ret[i][j];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tret[i][key] = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (rowMap) {\r\n\t\tfor (let i = 0; i < ret.length; i++) {\r\n\t\t\tlet key = ret[i][0];\r\n\t\t\tret[key] = ret[i];\r\n\t\t}\r\n\t}\r\n\treturn Promise.resolve(ret);\r\n};\r\nm.csvToJSON = function (str: string, colMap = true, rowMap = false): Promise<StrToJSON> {\r\n\tif (!str || typeof str !== \"string\") {\r\n\t\treturn Promise.reject(str);\r\n\t}\r\n\tlet rows: any = str.split(\"\\n\");\r\n\tfor (let i = 0; i < rows.length; i++) {\r\n\t\tif (rows[i].substring(0, 1) === '\"' && rows[i].substring(rows[i].length - 1) === '\"') {\r\n\t\t\trows[i] = rows[i].substring(1, rows[i].length - 1).split('\",\"');\r\n\t\t} else {\r\n\t\t\trows[i] = rows[i].split(\",\");\r\n\t\t}\r\n\t}\r\n\tif (colMap) {\r\n\t\tconst firstColSize = rows[0].length;\r\n\t\tfor (let i = 0; i < rows.length; i++) {\r\n\t\t\tlet jMax = rows[i].length > firstColSize ? firstColSize : rows[i].length;\r\n\t\t\tfor (let j = 0; j < jMax; j++) {\r\n\t\t\t\tlet key = rows[0][j];\r\n\t\t\t\trows[i][key] = rows[i][j];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (rowMap) {\r\n\t\tfor (let i = 0; i < rows.length; i++) {\r\n\t\t\tlet key = rows[i][0];\r\n\t\t\trows[key] = rows[i];\r\n\t\t}\r\n\t}\r\n\treturn Promise.resolve(rows);\r\n};\r\nm.arrayToTableHTML = function (txtArray: StrToJSON): string {\r\n\tlet tableStr = \"<table>\";\r\n\tfor (let row = 0; row < txtArray.length; row++) {\r\n\t\ttableStr += \"<tr>\";\r\n\t\tfor (let col = 0; col < txtArray[row].length; col++) {\r\n\t\t\ttableStr += `<td>${m.escapeOnlyTag(txtArray[row][col]).replace(/\\n/g, \"<br/>\")}</td>`;\r\n\t\t}\r\n\t\ttableStr += \"</tr>\";\r\n\t}\r\n\ttableStr += \"</table>\";\r\n\treturn tableStr;\r\n};\r\n\r\n// SEE (Super Easy Edit).\r\nm.SEEToArray = function (SEE: string): string[] {\r\n\tSEE = SEE.trim();\r\n\tconst dE = /\\s*\\n\\n+\\s*/g; // split by double enter.\r\n\tlet start = 0;\r\n\tlet end = 0;\r\n\tlet subStr: string;\r\n\tconst ps: string[] = []; // paragraphs\r\n\twhile (dE.exec(SEE) !== null) {\r\n\t\tend = dE.lastIndex;\r\n\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\tif (/^<pre\\s*[^>]*>/i.test(subStr)) {\r\n\t\t\twhile (!/<\\/pre>$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^```/.test(subStr)) {\r\n\t\t\twhile (!/```\\/$/.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^<script\\s*[^>]*>/i.test(subStr)) {\r\n\t\t\twhile (!/<\\/script>$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^<textarea\\s*[^>]*>/i.test(subStr)) {\r\n\t\t\twhile (!/<\\/textarea>$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^<data\\s*[^>]*>/i.test(subStr)) {\r\n\t\t\twhile (!/<\\/data>$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^<eqq\\s*[^>]*>/i.test(subStr)) {\r\n\t\t\twhile (!/<\\/eqq>$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t} else if (/^<!--/i.test(subStr)) {\r\n\t\t\twhile (!/-->$/i.test(subStr)) {\r\n\t\t\t\tdE.exec(SEE);\r\n\t\t\t\tend = dE.lastIndex;\r\n\t\t\t\tsubStr = SEE.substring(start, end).trim();\r\n\t\t\t}\r\n\t\t\tsubStr = \"\";\r\n\t\t}\r\n\t\tif (subStr) {\r\n\t\t\tps.push(subStr);\r\n\t\t}\r\n\t\tstart = end;\r\n\t}\r\n\tsubStr = SEE.substring(start).trim();\r\n\tif (subStr) {\r\n\t\tps.push(subStr);\r\n\t}\r\n\treturn ps;\r\n};\r\n\r\nm.getEmmetFromHead = function (head: string): string {\r\n\tconst exec = /^\\[([^\\s\\t\\n\\]]+?)\\]/.exec(head);\r\n\tif (exec) {\r\n\t\treturn exec[1];\r\n\t}\r\n\treturn \"\";\r\n};\r\nm.getClassesFromEmmet = function (str: string): string {\r\n\tconst rexClasses = /\\.([\\w\\:\\-\\%]+)/g;\r\n\tlet classes = \"\";\r\n\tlet res: ReturnType<typeof RegExp.prototype.exec>;\r\n\twhile ((res = rexClasses.exec(str))) {\r\n\t\tclasses += res[1] + \" \";\r\n\t}\r\n\treturn classes.trim();\r\n};\r\nm.getIdFromEmmet = function (str: string): string {\r\n\tlet res = /#([\\w\\:\\-\\%]+)/.exec(str);\r\n\tif (res) {\r\n\t\treturn res[1];\r\n\t}\r\n\treturn \"\";\r\n};\r\n\r\nm.renderToDocuK = function (toBeRendered: string, SEEi: number): string {\r\n\tconst ps = m.SEEToArray(toBeRendered);\r\n\r\n\tconst TOC = \"Table of Contents\";\r\n\tconst PH = \"Posting History\";\r\n\tconst COTD = \"Categories of this document\";\r\n\tconst RRA = \"References and Related Articles\";\r\n\r\n\tconst untilEnter = /[^\\n]+/g; // until enter.\r\n\tlet head: string, hN: number; // #*hN\r\n\tlet emmet = \"\",\r\n\t\tclasses = \"\",\r\n\t\telemId = \"\";\r\n\r\n\tlet docuOn = false,\r\n\t\tsecOn = false,\r\n\t\tsubsecOn = false,\r\n\t\tsubsubsecOn = false;\r\n\tlet str = \"\";\r\n\r\n\tlet countTOC = 1;\r\n\tlet countCOTD = 1;\r\n\tlet countPH = 1;\r\n\tlet countRRA = 1;\r\n\tlet h1Count = 1;\r\n\tlet h2Count = 1;\r\n\tlet h3Count = 1;\r\n\tlet h4Count = 1;\r\n\tlet hNCount = 1;\r\n\r\n\tfunction closeSec(hN: number) {\r\n\t\tswitch (hN) {\r\n\t\t\tcase 1:\r\n\t\t\t\tif (docuOn) {\r\n\t\t\t\t\tstr += \"</div>\";\r\n\t\t\t\t\tdocuOn = false;\r\n\t\t\t\t\th1Count++;\r\n\t\t\t\t}\r\n\t\t\tcase 2:\r\n\t\t\t\tif (secOn) {\r\n\t\t\t\t\tstr += \"</div>\";\r\n\t\t\t\t\tsecOn = false;\r\n\t\t\t\t}\r\n\t\t\tcase 3:\r\n\t\t\t\tif (subsecOn) {\r\n\t\t\t\t\tstr += \"</div>\";\r\n\t\t\t\t\tsubsecOn = false;\r\n\t\t\t\t}\r\n\t\t\tcase 4:\r\n\t\t\t\tif (subsubsecOn) {\r\n\t\t\t\t\tstr += \"</div>\";\r\n\t\t\t\t\tsubsubsecOn = false;\r\n\t\t\t\t}\r\n\t\t\t\tbreak; // \uB9C8\uC9C0\uB9C9 case\uC5D0 break \uCD94\uAC00\r\n\t\t\tdefault:\r\n\t\t}\r\n\t}\r\n\r\n\tfor (let i = 0; i < ps.length; i++) {\r\n\t\tps[i] = ps[i].trim();\r\n\t\tlet hNExec: ReturnType<typeof RegExp.prototype.exec>;\r\n\t\tif ((hNExec = /^#+(?![#\\/])/.exec(ps[i]))) {\r\n\t\t\tuntilEnter.lastIndex = hN = hNExec[0].length;\r\n\t\t\tcloseSec(hN);\r\n\t\t\tlet headTotal: ReturnType<typeof RegExp.prototype.exec>;\r\n\t\t\theadTotal = untilEnter.exec(ps[i]);\r\n\t\t\temmet = m.getEmmetFromHead(headTotal[0]);\r\n\t\t\thead = headTotal[0].trim();\r\n\t\t\tclasses = elemId = \"\";\r\n\t\t\tif (emmet) {\r\n\t\t\t\thead = headTotal[0].substring(emmet.length + 2).trim();\r\n\t\t\t\tclasses = m.getClassesFromEmmet(emmet);\r\n\t\t\t\telemId = m.getIdFromEmmet(emmet);\r\n\t\t\t\tif (classes) {\r\n\t\t\t\t\tclasses = ` ${classes}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tswitch (hN) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tstr += `<div class=\"docuK fromSEE\" id=\"SEEi${SEEi}\"><div class=\"sec${classes}\"><h1 id=\"${elemId ? elemId : `SEEi${SEEi}-${h1Count}`}\">${head}</h1>`;\r\n\t\t\t\t\tdocuOn = secOn = true;\r\n\t\t\t\t\th2Count = 1;\r\n\t\t\t\t\th3Count = 1;\r\n\t\t\t\t\th4Count = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tswitch (head) {\r\n\t\t\t\t\t\tcase \"TOC\":\r\n\t\t\t\t\t\t\tstr += `<div class=\"sec\">`;\r\n\t\t\t\t\t\t\thead = TOC;\r\n\t\t\t\t\t\t\tstr += `<h2 class=\"notSec\" id=\"SEEi${SEEi}-sec-TOC${countTOC++}\">${head}</h2><div class=\"toc\"></div></div>`; // self closing.\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"COTD\":\r\n\t\t\t\t\t\t\tstr += `<div class=\"sec hiden\">`;\r\n\t\t\t\t\t\t\thead = COTD;\r\n\t\t\t\t\t\t\tstr += `<h2 class=\"no-sec-N\" id=\"SEEi${SEEi}-sec-COTD${countCOTD++}\">${head}</h2>`;\r\n\t\t\t\t\t\t\tsecOn = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"PH\":\r\n\t\t\t\t\t\t\tstr += `<div class=\"sec hiden\">`;\r\n\t\t\t\t\t\t\thead = PH;\r\n\t\t\t\t\t\t\tstr += `<h2 class=\"no-sec-N\" id=\"SEEi${SEEi}-sec-PH${countPH++}\">${head}</h2>`;\r\n\t\t\t\t\t\t\tsecOn = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"RRA\":\r\n\t\t\t\t\t\t\tstr += `<div class=\"sec\">`;\r\n\t\t\t\t\t\t\thead = RRA;\r\n\t\t\t\t\t\t\tstr += `<h2 class=\"no-sec-N\" id=\"SEEi${SEEi}-sec-RRA${countRRA++}\">${head}</h2>`;\r\n\t\t\t\t\t\t\tsecOn = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tstr += `<div class=\"sec${classes}\">`;\r\n\t\t\t\t\t\t\tstr += `<h2 id=\"${elemId ? elemId : `SEEi${SEEi}-${h1Count}-${h2Count++}`}\">${head}</h2>`;\r\n\t\t\t\t\t\t\th3Count = 1;\r\n\t\t\t\t\t\t\th4Count = 1;\r\n\t\t\t\t\t\t\tsecOn = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tstr += `<div class=\"subsec${classes}\">`;\r\n\t\t\t\t\tstr += `<h3 id=\"${elemId ? elemId : `SEEi${SEEi}-${h1Count}-${h2Count}-${h3Count++}`}\">${head}</h3>`;\r\n\t\t\t\t\th4Count = 1;\r\n\t\t\t\t\tsubsecOn = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tstr += `<div class=\"subsubsec${classes}\">`;\r\n\t\t\t\t\tstr += `<h4 id=\"${elemId ? elemId : `SEEi${SEEi}-${h1Count}-${h2Count}-${h3Count}-${h4Count++}`}\">${head}</h4>`;\r\n\t\t\t\t\tsubsubsecOn = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstr += `<h${hN} id=\"${elemId ? elemId : `SEEi${SEEi}-h${hN}-${hNCount++}`}\">${head}</h${hN}>`;\r\n\t\t\t}\r\n\t\t\tps[i] = ps[i].substring(untilEnter.lastIndex).trim();\r\n\t\t} else if ((hNExec = /^#+(?=\\/)/.exec(ps[i]))) {\r\n\t\t\thN = hNExec[0].length;\r\n\t\t\tcloseSec(hN);\r\n\t\t\tcontinue; // Text after '#/' is ignored. Use '#####/' for comment.\r\n\t\t}\r\n\r\n\t\tif (ps[i].length) {\r\n\t\t\tif (/^<\\/?\\w/.test(ps[i])) {\r\n\t\t\t\tstr += ps[i];\r\n\t\t\t} else if (/^```/.test(ps[i])) {\r\n\t\t\t\tps[i] = ps[i].replace(/^```/, \"\").replace(/```\\/$/, \"\");\r\n\t\t\t\temmet = m.getEmmetFromHead(ps[i]);\r\n\t\t\t\tclasses = elemId = \"\";\r\n\t\t\t\tif (emmet) {\r\n\t\t\t\t\tps[i] = ps[i].substring(emmet.length + 2).trim();\r\n\t\t\t\t\tclasses = m.getClassesFromEmmet(emmet);\r\n\t\t\t\t\telemId = m.getIdFromEmmet(emmet);\r\n\t\t\t\t\tif (elemId) {\r\n\t\t\t\t\t\telemId = ` id=\"${elemId}\"`;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tstr += `<pre class=\"${classes.split(\" \").some((str) => str === \"no-linenums\") ? \"\" : \"line-numbers \"}${classes}\"${elemId}><code class=\"${classes}\">${ps[i]}</code></pre>`;\r\n\t\t\t} else {\r\n\t\t\t\tstr += `<div class=\"p\">${ps[i]}</div>`;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcloseSec(1);\r\n\r\n\treturn str;\r\n};\r\n\r\nm.getContentsJoinedWithEnter = function ($elem: JQuery<HTMLElement>): string {\r\n\tconst $contents = $elem.contents();\r\n\tconst contentsL = $contents.length;\r\n\tconst strArray: string[] = [];\r\n\tfor (let i = 0; i < contentsL; i++) {\r\n\t\tconst $contentI = $contents.eq(i);\r\n\t\tif ($contentI.is(\"ol\")) {\r\n\t\t\tconst $lis = $contentI.contents();\r\n\t\t\tfor (let j = 0; j < $lis.length; j++) {\r\n\t\t\t\tstrArray.push($lis.eq(j).text().trim());\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrArray.push($contentI.text().trim());\r\n\t\t}\r\n\t}\r\n\treturn strArray.join(\"\\n\");\r\n};\r\n\r\n// Functions for printing codes into 'pre'.\r\nm.indentsRemove = function (str: string): string {\r\n\tlet firstIndent = str.match(/^\\n\\t+/),\r\n\t\tindentRegExp;\r\n\tif (firstIndent !== null) {\r\n\t\t// if match (first indent) is found\r\n\t\tindentRegExp = new RegExp(\"\\\\n\\\\t{1,\" + (firstIndent[0].length - 1) + \"}\", \"g\"); // /\\n\\t{1,n}/g: global greedy matching\r\n\t} else {\r\n\t\tindentRegExp = /^\\n/; // just for minimum match\r\n\t}\r\n\treturn str.replace(indentRegExp, \"\\n\");\r\n};\r\n\r\nm.printCode = function (codeId: string): void {\r\n\tconst $pre = $(\"pre#pre-\" + codeId);\r\n\tconst $code = $(\"#\" + codeId);\r\n\tif ($pre.length) {\r\n\t\tlet html = m.indentsRemove($code.html()).trim();\r\n\t\tif (!$code.is(\".no-escape-HTML\")) {\r\n\t\t\thtml = m.escapeOnlyTag(html);\r\n\t\t}\r\n\t\t$pre.html(`<code class=\"${Array.from($pre[0].classList).join(\" \")}\">${html}</code>`);\r\n\t}\r\n};\r\n\r\n// Function for toggling height, i.e. switching scrollability with conserving view.\r\nm.toggleHeight = function (obj: HTMLElement): void {\r\n\tlet $obj = $(obj);\r\n\tlet $next0 = $obj.next();\r\n\tlet $next = $next0.children();\r\n\tlet toBeScrolledBy = 0;\r\n\tlet windowScrollTop = m.$window.scrollTop();\r\n\tlet nOffsetTop = $next.offset().top;\r\n\tlet nHeight = $next.height();\r\n\r\n\tif ($next.is(\".scrollable\")) {\r\n\t\t// becomes expanded.\r\n\t\ttoBeScrolledBy = $next.scrollTop();\r\n\t\t$next0.removeClass(\"scrollable\");\r\n\t\t$next.removeClass(\"scrollable\");\r\n\t\twindow.scrollTo(0, windowScrollTop + toBeScrolledBy);\r\n\t} else {\r\n\t\t// becomes scrollable.\r\n\t\tif (windowScrollTop < nOffsetTop) {\r\n\t\t\t// case0: no scroll\r\n\t\t\t$next0.addClass(\"scrollable\");\r\n\t\t\t$next.addClass(\"scrollable\");\r\n\t\t} else {\r\n\t\t\t// case1: scroll both\r\n\t\t\ttoBeScrolledBy = windowScrollTop - nOffsetTop;\r\n\t\t\tlet tailHeight = nHeight - toBeScrolledBy;\r\n\t\t\t$next0.addClass(\"scrollable\");\r\n\t\t\t$next.addClass(\"scrollable\");\r\n\t\t\tnHeight = $next.height();\r\n\t\t\twindow.scrollTo(0, nHeight > tailHeight ? nOffsetTop + nHeight - tailHeight : nOffsetTop);\r\n\t\t\t$next[0].scrollTop = toBeScrolledBy;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// section's show/hide functions\r\nm.ShowHide = function (elem: HTMLElement): void {\r\n\t$(elem).next().toggle();\r\n\tif ($(elem).next().is(\":visible\")) {\r\n\t\t$(elem).html(\"\u25BC Hide\");\r\n\t} else {\r\n\t\t$(elem).html(\"\u25BC Show\");\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tm.$window.trigger(\"scroll.delayedLoad\");\r\n\t}, 1000);\r\n};\r\nm.Hide = function (elem: HTMLElement): void {\r\n\tlet $elem = $(elem).parent();\r\n\twindow.scrollBy(0, -$elem.outerHeight());\r\n\t$elem.hide();\r\n\t$elem.parent().find(\".ShowHide\").html(\"\u25BC Show\");\r\n};\r\n\r\n// bubbleRef's show/hide functions\r\nm.ShowBR = function (elem: HTMLElement): void {\r\n\tclearTimeout(m.timerHideBRQueue);\r\n\tm.$bubbleRefs.hide();\r\n\t$(elem).find(\">.bubbleRef\").show();\r\n};\r\nm.timerHideBR = function (elem: HTMLElement): void {\r\n\tm.timerHideBRQueue = setTimeout(function () {\r\n\t\t$(elem).find(\">.bubbleRef\").hide();\r\n\t}, 1000);\r\n};\r\nm.HideBR = function (elem: HTMLElement): void {\r\n\t$(elem).parents(\".bubbleRef\").hide();\r\n};\r\n\r\n// Changing Styles of docuK\r\nm.mode = \"Bright\";\r\nm.fontFamily = \"Noto Sans KR\";\r\nm.fontSize = 16;\r\nm.lineHeight10 = 15;\r\nm.defaultStyles = {\r\n\tmode: m.mode,\r\n\tfontFamily: m.fontFamily,\r\n\tfontSize: m.fontSize,\r\n\tlineHeight10: m.lineHeight10,\r\n};\r\n\r\nm.printDeviceInfo = function (): void {\r\n\tif (m.$deviceInfo) {\r\n\t\tlet referrer = document.referrer;\r\n\t\tlet referrerHTML = referrer ? `<a target=\"_blank\" href=\"${referrer}\">${m.escapeOnlyTag(decodeURIComponent(referrer))}</a>` : `Empty`;\r\n\t\tm.$deviceInfo.html(\r\n\t\t\t`Mode: ${m.mode}; Font: ${m.fontFamily}; font-size: ${m.fontSize}px; line-height: ${(m.lineHeight10 / 10).toFixed(1)};<br/>\r\nwidth: ${m.browserWidth}, height: ${window.innerHeight}, version: ${m.version0}${m.version1}<br/>\r\n${m.canonicalURI ? `Canonical URI: <a target=\"_blank\" href=\"${m.canonicalURI}\">${m.escapeOnlyTag(decodeURIComponent(m.canonicalURI))}</a><br/>` : \"\"}\r\n${m.plink ? `dg:plink (Document Global Permanent Link): <a target=\"_blank\" href=\"${m.plink}\">${m.plink}</a><br/>` : \"\"}\r\ndocument.referrer: ${referrerHTML}`,\r\n\t\t);\r\n\t}\r\n};\r\n\r\nm.resetStyle = function (): void {\r\n\tm.Cmode(m.defaultStyles.mode);\r\n\tm.CfontFamily(m.defaultStyles.fontFamily);\r\n\tm.CfontSize(m.defaultStyles.fontSize - m.fontSize);\r\n\tm.ClineHeight(m.defaultStyles.lineHeight10 - m.lineHeight10);\r\n\tif (!m.$floating_key.is(\":visible\")) {\r\n\t\tm.toggleFK();\r\n\t}\r\n};\r\nm.Cmode = function (modeI: string): boolean {\r\n\tif (modeI === \"Dark\") {\r\n\t\tm.$html.removeClass(\"bright\");\r\n\t\tm.$html.addClass(\"dark\");\r\n\t\tm.$docuK.removeClass(\"bright\");\r\n\t\tm.$docuK.addClass(\"dark\");\r\n\t} else if (modeI === \"Bright\") {\r\n\t\tm.$html.removeClass(\"dark\");\r\n\t\tm.$html.addClass(\"bright\");\r\n\t\tm.$docuK.removeClass(\"dark\");\r\n\t\tm.$docuK.addClass(\"bright\");\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\tm.mode = modeI;\r\n\tm.printDeviceInfo();\r\n\tif (m.mode === m.defaultStyles.mode) {\r\n\t\tm.docCookies.removeItem(\"m.mode\", \"/\");\r\n\t} else {\r\n\t\tm.docCookies.setItem(\"m.mode\", m.mode, m.expire, \"/\");\r\n\t}\r\n\treturn true;\r\n};\r\nm.CfontFamily = function (font: string): boolean {\r\n\tm.$html.css({ fontFamily: font });\r\n\tm.$docuK.css({ fontFamily: font });\r\n\tm.fontFamily = font;\r\n\tm.printDeviceInfo();\r\n\tif (m.fontFamily === m.defaultStyles.fontFamily) {\r\n\t\tm.docCookies.removeItem(\"m.fontFamily\", \"/\");\r\n\t} else {\r\n\t\tm.docCookies.setItem(\"m.fontFamily\", m.fontFamily, m.expire, \"/\");\r\n\t}\r\n\treturn true;\r\n};\r\nm.CfontSize = function (increment: number): boolean {\r\n\tif (increment.constructor === Number && !isNaN(Number(increment))) {\r\n\t\tm.fontSize += increment;\r\n\t\tif (m.fontSize < 10) {\r\n\t\t\tm.fontSize = 10;\r\n\t\t} else if (m.fontSize > 25) {\r\n\t\t\tm.fontSize = 25;\r\n\t\t}\r\n\t\tm.$html.css({ \"font-size\": m.fontSize + \"px\" });\r\n\t\tm.printDeviceInfo();\r\n\t\tif (m.fontSize === m.defaultStyles.fontSize) {\r\n\t\t\tm.docCookies.removeItem(\"m.fontSize\", \"/\");\r\n\t\t} else {\r\n\t\t\tm.docCookies.setItem(\"m.fontSize\", m.fontSize.toFixed(1), m.expire, \"/\");\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\nm.ClineHeight = function (increment: number): boolean {\r\n\tif (increment.constructor === Number && !isNaN(Number(increment))) {\r\n\t\tm.lineHeight10 += increment;\r\n\t\tif (m.lineHeight10 < 10) {\r\n\t\t\tm.lineHeight10 = 10;\r\n\t\t\treturn false;\r\n\t\t} else if (m.lineHeight10 > 25) {\r\n\t\t\tm.lineHeight10 = 25;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst nLineHeight = Number((m.lineHeight10 / 10).toFixed(1));\r\n\t\tm.$html.css(\"line-height\", nLineHeight);\r\n\t\tm.$docuK.css(\"line-height\", nLineHeight);\r\n\t\tm.printDeviceInfo();\r\n\t\tif (m.lineHeight10 === m.defaultStyles.lineHeight10) {\r\n\t\t\tm.docCookies.removeItem(\"m.lineHeight10\", \"/\");\r\n\t\t} else {\r\n\t\t\tm.docCookies.setItem(\"m.lineHeight10\", m.lineHeight10.toString(), m.expire, \"/\");\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\nm.$window.on(\"resize.deviceInfo\", function () {\r\n\tif (window.innerWidth !== m.browserWidth) {\r\n\t\tm.browserWidth = window.innerWidth;\r\n\t\tm.fontSize = parseInt(m.$docuK.css(\"font-size\")); // font-size in px.\r\n\t\tm.printDeviceInfo();\r\n\t}\r\n});\r\n\r\n$(`#docuK-style`).after(`<div id=\"notify-copied\" class=\"block-touch\">\r\n<div>\r\n<div>[--The following is copied!--]</div>\r\n<textarea id=\"textarea-copied\"></textarea>\r\n</div>\r\n</div>\r\n<div id=\"notify-copied-exit\" class=\"block-touch-exit exit\" onclick=\"$('#notify-copied, #notify-copied-exit').hide()\">\r\n<svg>\r\n<g>\r\n<line x1=\"20%\" y1=\"20%\" x2=\"80%\" y2=\"80%\"></line>\r\n<line x1=\"80%\" y1=\"20%\" x2=\"20%\" y2=\"80%\"></line>\r\n</g>\r\n\u2716\r\n</svg>\r\n</div>`);\r\n$(\"#notify-copied, #notify-copied-exit\").hide();\r\nm.$textarea_copied = $(`#textarea-copied`);\r\n\r\n// Share a link through SNS\r\nm.shareSNS = function (service: string): boolean {\r\n\tconst title = m.$title.html();\r\n\tconst url = window.location.href;\r\n\tconst decodedURL = m.escapeOnlyTag(decodeURIComponent(url));\r\n\tlet open = \"\";\r\n\tswitch (service) {\r\n\t\tcase \"link\":\r\n\t\t\tlet written = `${title}\\n${url}${url !== decodedURL ? `\\n${decodedURL}` : ``}`;\r\n\t\t\tnavigator.clipboard.writeText(written).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tm.$textarea_copied[0].value = written;\r\n\t\t\t\t\t$(\"#notify-copied, #notify-copied-exit\").show();\r\n\t\t\t\t},\r\n\t\t\t\tfunction (err) {\r\n\t\t\t\t\tm.$textarea_copied[0].value = `Could not copy text: ${err}`;\r\n\t\t\t\t\t$(\"#notify-copied, #notify-copied-exit\").show();\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\tcase \"tag\":\r\n\t\t\tlet written1 = `${title}:<br/>\\n<a target=\"_blank\" href=\"${url}\">${decodedURL}</a>`;\r\n\t\t\tnavigator.clipboard.writeText(written1).then(\r\n\t\t\t\tfunction () {\r\n\t\t\t\t\tm.$textarea_copied[0].value = written1;\r\n\t\t\t\t\t$(\"#notify-copied, #notify-copied-exit\").show();\r\n\t\t\t\t},\r\n\t\t\t\tfunction (err) {\r\n\t\t\t\t\tm.$textarea_copied[0].value = `Could not copy text: ${err}`;\r\n\t\t\t\t\t$(\"#notify-copied, #notify-copied-exit\").show();\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\tcase \"X\":\r\n\t\t\topen = \"https://X.com/intent/tweet?via=kipacti&text=\" + encodeURIComponent(title) + \"&url=\" + encodeURIComponent(url);\r\n\t\t\tbreak;\r\n\t\tcase \"facebook\":\r\n\t\t\topen = \"https://www.facebook.com/sharer/sharer.php?u=\" + encodeURIComponent(url);\r\n\t\t\tbreak;\r\n\t\tcase \"recoeve\":\r\n\t\t\topen = `https://recoeve.net/reco?uri=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}${m.recoCats ? `&cats=${encodeURIComponent(m.recoCats)}` : \"\"}`;\r\n\t\t\tbreak;\r\n\t\tcase \"kakao\":\r\n\t\t\tm.popUpKakao();\r\n\t\t\treturn;\r\n\t\tcase \"Whatsapp\":\r\n\t\t\topen = `https://wa.me/?text=${encodeURIComponent(title)}%0A${encodeURIComponent(url)}`;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\treturn;\r\n\t}\r\n\twindow.open(open);\r\n};\r\n\r\n// Delayed Loading. (Copied from user-page.html)\r\nm.delayPad = m.delayPad || 0;\r\nm.wait = m.wait || 1024;\r\nm.$delayedElems = $(\"#nothing\");\r\nm.previous = Date.now();\r\n$.fn.inView = function (): boolean {\r\n\tif (this.is(\":visible\")) {\r\n\t\tlet viewportHeight = window.innerHeight;\r\n\t\tlet scrollTop = m.$window.scrollTop();\r\n\t\tlet elemTop = this.offset().top - m.delayPad;\r\n\t\tlet elemBottom = elemTop + this.height() + m.delayPad;\r\n\t\treturn scrollTop + viewportHeight > elemTop && scrollTop < elemBottom;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n};\r\n$.fn.delayedLoad = function (): boolean {\r\n\tlet done = false;\r\n\tif (this.inView()) {\r\n\t\tif (this.hasClass(\"to-be-executed\")) {\r\n\t\t\tthis.removeClass(\"to-be-executed\");\r\n\t\t\tthis.trigger(\"click\");\r\n\t\t\tdone = true;\r\n\t\t}\r\n\t\t// divs with background-image\r\n\t\tif (this.attr(\"delayed-bgimage\")) {\r\n\t\t\tthis.css(\"background-image\", \"url(\" + this.attr(\"delayed-bgimage\") + \")\");\r\n\t\t\tthis.removeAttr(\"delayed-bgimage\");\r\n\t\t\tdone = true;\r\n\t\t}\r\n\t\t// iframes or images\r\n\t\tif (this.attr(\"delayed-src\")) {\r\n\t\t\tthis.attr(\"src\", this.attr(\"delayed-src\"));\r\n\t\t\tthis.removeAttr(\"delayed-src\");\r\n\t\t\tdone = true;\r\n\t\t}\r\n\t\t// MathJax Process\r\n\t\tif (typeof window.MathJax !== \"undefined\" && this.is(\".MathJax_Preview\")) {\r\n\t\t\tif (this.next()?.[0]) {\r\n\t\t\t\twindow.MathJax.typesetPromise([this.next()[0]]);\r\n\t\t\t}\r\n\t\t\tdone = true;\r\n\t\t}\r\n\t}\r\n\treturn done;\r\n};\r\nm.delayedLoadAll = function (): Promise<void> {\r\n\treturn new Promise(async function (resolve, reject): Promise<void> {\r\n\t\tm.logPrint(`<br/>Doing delayed-load. : ${m.$delayedElems.length}`);\r\n\t\tif (m.$delayedElems.length > 0) {\r\n\t\t\tm.$delayedElems.each(function () {\r\n\t\t\t\tif ($(this).delayedLoad()) {\r\n\t\t\t\t\tm.$delayedElems = m.$delayedElems.not(this);\r\n\t\t\t\t\tm.logPrint(`<br/><span class=\"emph\">${this} at vertical position of ${((100.0 * $(this).offset().top) / m.$document.height()).toPrecision(3)}% of document is delayed-loaded.</span><br/>${m.$delayedElems.length} of $delayedElems are remained.<br/>`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tm.$window.on(\"scroll.delayedLoad\", m.delayedLoadByScroll);\r\n\t\t} else {\r\n\t\t\tm.logPrint(`<br/><br/>All delayedElem are loaded.`);\r\n\t\t\tm.$window.off(\"scroll.delayedLoad\");\r\n\t\t}\r\n\t\tm.previous = Date.now();\r\n\t\tresolve();\r\n\t});\r\n};\r\nm.delayedLoadByScroll = function (): Promise<void> {\r\n\treturn new Promise(async function (resolve, reject): Promise<void> {\r\n\t\tm.$window.off(\"scroll.delayedLoad\");\r\n\t\tlet now = Date.now();\r\n\t\tlet passed = now - m.previous;\r\n\t\tif (passed > m.wait) {\r\n\t\t\tawait m.delayedLoadAll();\r\n\t\t\tresolve();\r\n\t\t} else {\r\n\t\t\tclearTimeout(m.setTimeoutDelayedLoad);\r\n\t\t\tm.setTimeoutDelayedLoad = setTimeout(\r\n\t\t\t\tasync function () {\r\n\t\t\t\t\tawait m.delayedLoadAll();\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t},\r\n\t\t\t\tm.wait * 1.5 - passed,\r\n\t\t\t);\r\n\t\t\tm.logPrint(`<br/>wait ${(m.wait * 1.5 - passed).toFixed(0)}ms.`);\r\n\t\t}\r\n\t});\r\n};\r\nm.$window.on(\"scroll.delayedLoad\", m.delayedLoadByScroll);\r\n\r\nm.toggleAMess = function (elem: HTMLElement): void {\r\n\tlet $elem = $(elem);\r\n\tlet wSTBefore = m.$window.scrollTop();\r\n\tlet orderElem = $elem.index(\".order\");\r\n\tlet orderLastElem = $(\".order\").last().index(\".order\");\r\n\tlet $collection = $(\".order\");\r\n\tif ($collection.not(\".button\").is(\":visible\")) {\r\n\t\tif (orderElem === orderLastElem) {\r\n\t\t\tlet sHBefore = document.documentElement.scrollHeight;\r\n\t\t\t$collection.not(\".button\").hide();\r\n\t\t\tlet sHAfter = document.documentElement.scrollHeight;\r\n\t\t\tm.$window.scrollTop(wSTBefore - sHBefore + sHAfter);\r\n\t\t} else {\r\n\t\t\tlet elemTop = $elem.offset().top;\r\n\t\t\t$collection.not(\".button\").hide();\r\n\t\t\tlet elemTopAfter = $elem.offset().top;\r\n\t\t\tm.$window.scrollTop(wSTBefore + elemTopAfter - elemTop);\r\n\t\t}\r\n\t} else {\r\n\t\tif (orderElem === orderLastElem) {\r\n\t\t\tlet sHBefore = document.documentElement.scrollHeight;\r\n\t\t\t$collection.show();\r\n\t\t\tlet sHAfter = document.documentElement.scrollHeight;\r\n\t\t\tm.$window.scrollTop(wSTBefore - sHBefore + sHAfter);\r\n\t\t} else {\r\n\t\t\tlet elemTop = $elem.offset().top;\r\n\t\t\t$collection.show();\r\n\t\t\tlet elemTopAfter = $elem.offset().top;\r\n\t\t\tm.$window.scrollTop(wSTBefore + elemTopAfter - elemTop);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// docuK Process\r\nm.docuKProcess = function docuK(docuKI: number): void {\r\n\t// Possible duplicate id is handled.\r\n\tdocuKI = isNaN(docuKI) ? 1 : parseInt(String(docuKI));\r\n\tm.logPrint(`<br/><br/>docuK${docuKI} scripts started!<br/><span class=\"emph\">If this log is not closed automatically, there must be an error somewhere in your document or scripts.</span>`);\r\n\tconst $docuKI: JQuery<HTMLElement> = m.$docuK.eq(docuKI);\r\n\tif ($docuKI.is(\".rendered\")) {\r\n\t\tm.logPrint(`<br/><br/>docuK${docuKI} is already rendered.`);\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet postId = \"-in-docuK\" + docuKI;\r\n\tconst postIdRegEx = new RegExp(postId + \"$\");\r\n\tif ($docuKI.is(\".noDIdHandle\") || docuKI <= 1) {\r\n\t\tpostId = \"\";\r\n\t} else {\r\n\t\t$docuKI.find(\"[id]\").each((index: number, elem: HTMLElement) => {\r\n\t\t\tconst $this: JQuery<HTMLElement> = $(elem) as JQuery<HTMLElement>;\r\n\t\t\t$this.attr(\"id\", $this.attr(\"id\") + postId);\r\n\t\t});\r\n\t}\r\n\r\n\tif (!m.printMode) {\r\n\t\t// Copyright and Short Keys announcement.\r\n\t\t$docuKI.before(`<div class=\"docuK-con\"><div class=\"copyright order\"><ul>\r\n<li class=\"license cc\"><span class=\"bold\">Creative Commons</span></li>\r\n<li class=\"license by\"><span class=\"bold\">\uC800\uC791\uC790\uD45C\uC2DC</span> - \uC801\uC808\uD55C \uCD9C\uCC98\uC640, \uD574\uB2F9 \uB77C\uC774\uC13C\uC2A4 \uB9C1\uD06C\uB97C \uD45C\uC2DC\uD558\uACE0, \uBCC0\uACBD\uC774 \uC788\uB294 \uACBD\uC6B0 \uACF5\uC9C0\uD574\uC57C \uD569\uB2C8\uB2E4. \uD569\uB9AC\uC801\uC778 \uBC29\uC2DD\uC73C\uB85C \uC774\uB807\uAC8C \uD558\uBA74 \uB418\uC9C0\uB9CC, \uC774\uC6A9 \uD5C8\uB77D\uAD8C\uC790\uAC00 \uADC0\uD558\uC5D0\uAC8C \uAD8C\uB9AC\uB97C \uBD80\uC5EC\uD55C\uB2E4\uAC70\uB098 \uADC0\uD558\uC758 \uC0AC\uC6A9\uC744 \uD5C8\uAC00\uD55C\uB2E4\uB294 \uB0B4\uC6A9\uC744 \uB098\uD0C0\uB0B4\uC11C\uB294 \uC548 \uB429\uB2C8\uB2E4.</li>\r\n<li class=\"license nc\"><span class=\"bold\">\uBE44\uC601\uB9AC</span> - \uC774 \uC800\uC791\uBB3C\uC740 \uC601\uB9AC \uBAA9\uC801\uC73C\uB85C \uC774\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.</li>\r\n<li class=\"license nd\"><span class=\"bold\">\uBCC0\uACBD\uAE08\uC9C0</span> - \uC774 \uC800\uC791\uBB3C\uC744 \uB9AC\uBBF9\uC2A4, \uBCC0\uD615\uD558\uAC70\uB098 2\uCC28\uC801 \uC800\uC791\uBB3C\uC744 \uC791\uC131\uD558\uC600\uC744 \uACBD\uC6B0 \uADF8 \uACB0\uACFC\uBB3C\uC744 \uACF5\uC720\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.</li>\r\n</ul></div></div>`);\r\n\t}\r\n\r\n\t// Style change widget, and SNS widget.\r\n\t$docuKI.prepend(`<div class=\"docuK-info\">\r\n<div class=\"change-docuK-style\" id=\"change-docuK-style${docuKI}\">\r\n<form><button type=\"button\" onclick=\"k.resetStyle()\" style=\"width:auto; padding:0 .5rem\">Reset docuK style</button></form>\r\n<form><input id=\"button${docuKI}-Dark\" type=\"radio\" name=\"mode\" value=\"Dark\" onclick=\"k.Cmode(this.value)\"><label for=\"button${docuKI}-Dark\" style=\"display:inline-block; background:black; color:white; border:2px solid rgb(150,150,150); padding:0.1rem 0.2rem\">Dark</label>\r\n</input><input id=\"button${docuKI}-Bright\" type=\"radio\" name=\"mode\" value=\"Bright\" onclick=\"k.Cmode(this.value)\"><label for=\"button${docuKI}-Bright\" style=\"display:inline-block; background:white; color:black; border:2px solid rgb(150,150,150); padding:0.1rem 0.2rem\">Bright</label></input></form>\r\n<form><input id=\"input${docuKI}-font-family\" class=\"bold\" type=\"text\" name=\"font\" value=\"Noto Sans KR\" style=\"font-size:1.2rem; width:8rem; height:1.8rem; text-align:center\" onchange=\"m.CfontFamily(this.value)\"></input></form>\r\n<form><button type=\"button\" onclick=\"k.CfontSize(-1)\" style=\"font-size:1rem\">A</button><button type=\"button\" onclick=\"k.CfontSize(1)\" style=\"font-size:1.4rem\">A</button></form>\r\n<form><button type=\"button\" onclick=\"k.ClineHeight(-1)\" style=\"font-size:1rem\">=</button><button type=\"button\" onclick=\"k.ClineHeight(1)\" style=\"font-size:1.6rem\">=</button></form>\r\n<form><button class=\"button-log\" type=\"button\" onclick=\"k.$window.trigger({type:'keydown', code:'KeyK'})\" style=\"width:auto; padding:0 .5rem\">DocuK Log</button></form>\r\n<form><button class=\"button-Go\" type=\"button\" onclick=\"k.$window.trigger({type:'keydown', code:'KeyG'})\" style=\"font:inherit; width:auto; padding:0 .5rem\">Fuzzy search</button></form>\r\n</div>\r\n<div class=\"deviceInfo\"></div>\r\n<div class=\"promoting-docuK\">This document is rendered by <a href=\"https://kipid.tistory.com/entry/HTML-docuK-format-ver-20\">docuK</a> (See also <a href=\"https://kipid.tistory.com/entry/Super-Easy-Edit-SEE-of-docuK\">SEE (Super Easy Edit) of docuK</a> and <a href=\"https://kipid.tistory.com/entry/pure-SEE\">pure SEE</a>).</div>\r\n</div>\r\n<div class=\"SNS-top\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Link.png\" onclick=\"return m.shareSNS('link')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Tag.png\" onclick=\"return m.shareSNS('tag')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Recoeve.png\" onclick=\"k.shareSNS('recoeve')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-X.png\" onclick=\"k.shareSNS('X')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Facebook.png\" onclick=\"k.shareSNS('facebook')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Kakao.png\" onclick=\"k.shareSNS('kakao')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Whatsapp.png\" onclick=\"k.shareSNS('Whatsapp')\"></div>`);\r\n\t$docuKI.append(`<div class=\"SNS-bottom\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Link.png\" onclick=\"return m.shareSNS('link')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Tag.png\" onclick=\"return m.shareSNS('tag')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Recoeve.png\" onclick=\"k.shareSNS('recoeve')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-X.png\" onclick=\"k.shareSNS('X')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Facebook.png\" onclick=\"k.shareSNS('facebook')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Kakao.png\" onclick=\"k.shareSNS('kakao')\"><img class=\"SNS-img\" src=\"https://tistory1.daumcdn.net/tistory/1468360/skin/images/icon-Whatsapp.png\" onclick=\"k.shareSNS('Whatsapp')\"></div>`);\r\n\r\n\t// Numbering section, making table of contents, and numbering eqq (formatting to MathJax also) and figure tags\r\n\tlet $secs: JQuery<HTMLElement> = $docuKI.find(\">.sec\");\r\n\tlet $subSecs: JQuery<HTMLElement>;\r\n\tlet $subSubSecs: JQuery<HTMLElement>;\r\n\tlet secContentsId = \"\";\r\n\tlet $secI: JQuery<HTMLElement>;\r\n\tlet $secIH2: JQuery<HTMLElement>;\r\n\tlet $subsecJH3: JQuery<HTMLElement>;\r\n\tlet $subsubsecKH4: JQuery<HTMLElement>;\r\n\tlet secN = 0;\r\n\tlet secITxt = \"\";\r\n\tlet subsecI = 0;\r\n\tlet subsubsecI = 0;\r\n\tlet tocHtml = \"\";\r\n\tlet txt = \"\";\r\n\tlet secId = \"\";\r\n\tlet secPreTxt = \"\";\r\n\tlet $eqqs: JQuery<HTMLElement>;\r\n\tlet eqN = \"\";\r\n\tlet eqC = \"\";\r\n\tlet $figs: JQuery<HTMLElement>;\r\n\tlet hN = 2;\r\n\tfunction fTocHtml(numbering?: boolean): string {\r\n\t\tlet secN = numbering === undefined || numbering ? \"secN\" : \"none\";\r\n\t\treturn `<h${hN}><a class=\"jump\" id=\"toc${docuKI}-${secId}\" href=\"#secId${docuKI}-${secId}\"><span class=\"${secN}\"><span class=\"number\">${secPreTxt}</span>.</span>${txt}</a></h${hN}>`;\r\n\t}\r\n\tfunction fSecHtml(numbering?: boolean): string {\r\n\t\tlet secN = \"none\",\r\n\t\t\tendA0 = \"\",\r\n\t\t\tendA1 = \"</a>\";\r\n\t\tif (numbering === undefined || numbering) {\r\n\t\t\tsecN = \"secN\";\r\n\t\t\tendA0 = \"</a>\";\r\n\t\t\tendA1 = \"\";\r\n\t\t}\r\n\t\treturn `<a class=\"jump tJump\" href=\"#toc${docuKI}-${secId}\">T</a><a class=\"jump\" id=\"secId${docuKI}-${secId}\" href=\"#secId${docuKI}-${secId}\"><span class=\"${secN}\"><span class=\"number\">${secPreTxt}</span>.</span>${endA0}<span class=\"head-txt\">${txt}</span>${endA1}`;\r\n\t}\r\n\tfunction fEqqHtml(): string {\r\n\t\treturn `<div class=\"eqCC\"><div class=\"eqN\"><span class=\"number\">(${eqN})</span></div><div class=\"eqC\">${eqC}</div></div>`;\r\n\t}\r\n\tfor (let i = 0; i < $secs.length; i++) {\r\n\t\t$secI = $secs.eq(i);\r\n\t\t$secIH2 = $secI.find(\"h2:first-child\");\r\n\t\tif ($secIH2 && $secIH2.length && !$secIH2.is(\".notSec\")) {\r\n\t\t\t// exclude \".sec>h1\" and \".sec>h2.notSec\" in ToC\r\n\t\t\thN = 2;\r\n\t\t\ttxt = $secIH2.html();\r\n\t\t\tif ($secIH2.is(\".no-sec-N\") || $secI.is(\".no-sec-N\")) {\r\n\t\t\t\tsecPreTxt =\r\n\t\t\t\t\tsecId =\r\n\t\t\t\t\tsecITxt =\r\n\t\t\t\t\t\t$secIH2.is(\"[id]\")\r\n\t\t\t\t\t\t\t? $secIH2\r\n\t\t\t\t\t\t\t\t\t.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t?.replace(/^SEEi\\d+\\-/, \"\")\r\n\t\t\t\t\t\t\t\t\t?.replace(/^sec\\-/i, \"\")\r\n\t\t\t\t\t\t\t\t\t.replace(postIdRegEx, \"\")\r\n\t\t\t\t\t\t\t: `secPreTxt${docuKI}-${i}`;\r\n\t\t\t\ttocHtml += fTocHtml(false);\r\n\t\t\t\t$secIH2.html(fSecHtml(false));\r\n\t\t\t} else {\r\n\t\t\t\tsecN++;\r\n\t\t\t\tsecPreTxt = secId = secITxt = secN.toString();\r\n\t\t\t\ttocHtml += fTocHtml();\r\n\t\t\t\t$secIH2.html(fSecHtml());\r\n\t\t\t}\r\n\r\n\t\t\tsecContentsId = `sec${docuKI}-${secITxt}-contents`;\r\n\t\t\t$secI.append(`<div class=\"cBoth\"></div><div class=\"Hide\" onclick=\"k.Hide(this)\">\u25B2 Hide</div><div class=\"cBoth\"></div>`);\r\n\t\t\t$secI.contents().slice(1).wrapAll(`<div class=\"sec-contents\" id=\"${secContentsId}\"></div>`);\r\n\t\t\t$secIH2.after(`<div class=\"ShowHide\" onclick=\"k.ShowHide(this)\">\u25BC Show/Hide</div>`);\r\n\t\t\t$secI.append(`<div class=\"cBoth\"></div>`);\r\n\r\n\t\t\t$subSecs = $secI.find(\".subsec\");\r\n\t\t\tsubsecI = 0;\r\n\t\t\tfor (let j = 0; j < $subSecs.length; j++) {\r\n\t\t\t\t$subsecJH3 = $subSecs.eq(j).find(\"h3:first-child\");\r\n\t\t\t\thN = 3;\r\n\t\t\t\tsubsecI++;\r\n\t\t\t\tsecId = secITxt + \"-\" + subsecI;\r\n\t\t\t\tsecPreTxt = secITxt + \".\" + subsecI;\r\n\t\t\t\ttxt = $subsecJH3.html();\r\n\t\t\t\ttocHtml += fTocHtml();\r\n\t\t\t\t$subsecJH3.html(fSecHtml());\r\n\r\n\t\t\t\t$subSubSecs = $subSecs.eq(j).find(\".subsubsec\");\r\n\t\t\t\tsubsubsecI = 0;\r\n\t\t\t\tfor (let k = 0; k < $subSubSecs.length; k++) {\r\n\t\t\t\t\t$subsubsecKH4 = $subSubSecs.eq(k).find(\"h4:first-child\");\r\n\t\t\t\t\thN = 4;\r\n\t\t\t\t\tsubsubsecI++;\r\n\t\t\t\t\tsecId = secITxt + \"-\" + subsecI + \"-\" + subsubsecI;\r\n\t\t\t\t\tsecPreTxt = secITxt + \".\" + subsecI + \".\" + subsubsecI;\r\n\t\t\t\t\ttxt = $subsubsecKH4.html();\r\n\t\t\t\t\ttocHtml += fTocHtml();\r\n\t\t\t\t\t$subsubsecKH4.html(fSecHtml());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsecITxt = \"x\";\r\n\t\t}\r\n\t\t$eqqs = $secI.find(\"eqq\");\r\n\t\tfor (let j = 0; j < $eqqs.length; j++) {\r\n\t\t\teqN = secITxt + \"-\" + (j + 1).toString();\r\n\t\t\teqC = $eqqs.eq(j).html().trim();\r\n\t\t\t$eqqs.eq(j).html(fEqqHtml());\r\n\t\t}\r\n\t\t$figs = $secI.find(\"figure\");\r\n\t\tfor (let j = 0; j < $figs.length; j++) {\r\n\t\t\tconst figN = secITxt + \"-\" + (j + 1).toString();\r\n\t\t\t$figs\r\n\t\t\t\t.eq(j)\r\n\t\t\t\t.find(\".caption\")\r\n\t\t\t\t.html(function (ith, orgTxt) {\r\n\t\t\t\t\treturn `Fig. <span class=\"number\">(${figN})</span>: ${orgTxt.trim()}`;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$secs.find(\".toc\").html(tocHtml);\r\n\tm.logPrint(`<br/><br/>Table of Contents is filled out.<br/><br/>Auto numberings of sections (div.sec>h2, div.subsec>h3, div.subsubsec>h4), &lt;eqq&gt; tags, and &lt;figure&gt; tags are done.`);\r\n\r\n\t// Make 'cite' tags bubble-refer references in \".docuK ol.refs>li\".\r\n\t// Make 'refer' tags bubble-refer equations (eqq tag) or figures (figure tag). Any tag with id can be bubble-refered with refer tag.\r\n\tfunction pad(str: string | number, max: number) {\r\n\t\tstr = str.toString();\r\n\t\treturn str.padStart(max, \"0\");\r\n\t}\r\n\tlet refN = \"\",\r\n\t\tpreRefHtml = \"\",\r\n\t\trefHtml = \"\",\r\n\t\tciteN = \"\";\r\n\tfunction fCiteHtml() {\r\n\t\tlet str = `<div class=\"inRef\" onmouseover=\"m.ShowBR(this)\" onmouseout=\"m.timerHideBR(this)\">${refN}<div class=\"bubbleRef\"><div class=\"content\">${preRefHtml}${refHtml}<div class=\"exit\" onclick=\"k.HideBR(this)\"><svg><g style=\"stroke:white;stroke-width:23%\"><line x1=\"20%\" y1=\"20%\" x2=\"80%\" y2=\"80%\"/><line x1=\"80%\" y1=\"20%\" x2=\"20%\" y2=\"80%\"/></g>\u2716</svg></div></div><div class=\"arrow\"></div></div></div>`;\r\n\t\treturn str;\r\n\t}\r\n\tlet $olRefs: JQuery<HTMLElement> = $docuKI.find(\"ol.refs\");\r\n\t$olRefs = $olRefs.eq($olRefs.length - 1);\r\n\tlet $refs: JQuery<HTMLElement> = $docuKI.find(\"ol.refs>li\");\r\n\tlet refsN = $refs.length;\r\n\tfor (let i = 0; i < refsN; i++) {\r\n\t\t// ref [i+1] with id\r\n\t\t$refs.eq(i).prepend(`<span class=\"refN\">Ref. <span class=\"number\">[${pad((i + 1).toString(), 2)}]</span> </span>`);\r\n\t}\r\n\tlet $cites: JQuery<HTMLElement> = $docuKI.find(\"cite\");\r\n\tfor (let i = 0; i < $cites.length; i++) {\r\n\t\tlet $citeI: JQuery<HTMLElement> = $cites.eq(i);\r\n\t\tif ($citeI.is(\"[class]\")) {\r\n\t\t\tlet $refered: JQuery<HTMLElement>;\r\n\t\t\tif ($citeI.html() !== \"\") {\r\n\t\t\t\t$refered = $docuKI.find(\"#\" + $citeI.attr(\"class\") + postId);\r\n\t\t\t\tif ($refered.length) {\r\n\t\t\t\t\tlet refNHtml = $refered.find(\".refN\").html();\r\n\t\t\t\t\t$refered.html(`<span class=\"refN\">${refNHtml}</span>${$citeI.html()}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trefsN += 1;\r\n\t\t\t\t\t$olRefs.append(`<li id=\"${$citeI.attr(\"class\")}${postId}\"><span class=\"refN\">Ref. <span class=\"number\">[${pad(refsN.toString(), 2)}]</span> </span>${$citeI.html()}</li>`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$refered = $docuKI.find(\"#\" + $citeI.attr(\"class\") + postId);\r\n\t\t\tif ($refered.length) {\r\n\t\t\t\tciteN = (i + 1).toString() + \"-\" + $citeI.attr(\"class\") + postId;\r\n\t\t\t\trefHtml = $refered\r\n\t\t\t\t\t.html()\r\n\t\t\t\t\t.trim()\r\n\t\t\t\t\t.replace(/\\bid\\s*=/gi, \"psudoId=\");\r\n\t\t\t\trefN = $refered.find(\".number\").html();\r\n\t\t\t\t$citeI.html(fCiteHtml());\r\n\t\t\t} else {\r\n\t\t\t\t$citeI.html(`<span class=\"emph\">( No refer. )</span>`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tlet $refers: JQuery<HTMLElement> = $docuKI.find(\"refer\");\r\n\t$refers.html(`<span class=\"emph\">( No refer. )</span>`);\r\n\tfor (let i = 0; i < $refers.length; i++) {\r\n\t\tlet $referI: JQuery<HTMLElement> = $refers.eq(i);\r\n\t\tif ($referI.is(\"[class]\")) {\r\n\t\t\tlet $refered: JQuery<HTMLElement> = $docuKI.find(`#${$referI.attr(\"class\")}${postId}`);\r\n\t\t\tif ($refered.length) {\r\n\t\t\t\tciteN = (i + 1).toString() + \"-\" + $referI.attr(\"class\") + postId;\r\n\t\t\t\trefHtml = $refered\r\n\t\t\t\t\t.html()\r\n\t\t\t\t\t.trim()\r\n\t\t\t\t\t.replace(/\\bid\\s*=/gi, \" psudoId=\");\r\n\t\t\t\trefN = $refered.find(\".number\").html();\r\n\t\t\t\t$referI.html(fCiteHtml());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tm.logPrint(`<br/><br/>&lt;cite&gt; and &lt;refer&gt; tags are rendered to show bubble reference.`);\r\n\r\n\t$docuKI.addClass(\"rendered\");\r\n};\r\n\r\nm.$logAll.hide();\r\nm.logOn = false;\r\n})(window.k, jQuery);\r\n"],
  "mappings": "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",
  "names": ["m", "$", "fsToRs", "s", "len", "i", "code", "searchStr", "vars", "j", "splits", "key", "value", "k", "arr", "sorted", "n", "largest", "r", "upto", "until", "str", "uri", "exec", "elem", "$elem", "$parent", "$z", "zIndex", "elemStr", "option", "id", "noPc", "v", "inListPlay", "config", "list", "time", "secondToSeek", "hour", "minute", "second", "ptnURI", "uriRest", "toA", "descR", "resolve", "reject", "shortURI", "resp", "decomposedURI", "uriRendered", "pathname", "lastPath", "no", "href", "keepOriginal", "$uri", "src", "err", "conciseURI", "res", "l", "result", "uriHost", "search", "hash", "ptnURL", "start", "sKey", "sPath", "sDomain", "bSecure", "sValue", "vEnd", "sExpires", "val", "catsSplit", "cat", "e", "touch0", "relativeX", "relativeY", "p", "cho", "jung", "jong", "c", "ptnSH", "mapKE", "strSplitted", "indices", "p1", "p2", "strSH", "diff", "fs", "shuffled", "regExs", "regExsReversed", "listI", "txt", "txtS", "txtSReversed", "matched", "maxMatchScore", "indicesMMS", "matchScore", "indicesReversed", "iR", "temp", "$fsl", "$lis", "$liSelected", "$liTo", "$listI", "fsPtnSH", "fsFLk", "now", "passed", "colMap", "rowMap", "ret", "delimiter", "lastQuote", "row", "col", "delim", "strElem", "increaseRC", "firstColSize", "jMax", "rows", "txtArray", "tableStr", "SEE", "dE", "end", "subStr", "ps", "head", "rexClasses", "classes", "toBeRendered", "SEEi", "TOC", "PH", "COTD", "RRA", "untilEnter", "hN", "emmet", "elemId", "docuOn", "secOn", "subsecOn", "subsubsecOn", "countTOC", "countCOTD", "countPH", "countRRA", "h1Count", "h2Count", "h3Count", "h4Count", "hNCount", "closeSec", "hNExec", "headTotal", "$contents", "contentsL", "strArray", "$contentI", "firstIndent", "indentRegExp", "codeId", "$pre", "$code", "html", "obj", "$next0", "$next", "toBeScrolledBy", "windowScrollTop", "nOffsetTop", "nHeight", "tailHeight", "referrer", "referrerHTML", "modeI", "font", "increment", "nLineHeight", "service", "title", "url", "decodedURL", "open", "written", "written1", "viewportHeight", "scrollTop", "elemTop", "elemBottom", "done", "wSTBefore", "orderElem", "orderLastElem", "$collection", "sHBefore", "sHAfter", "elemTopAfter", "docuKI", "$docuKI", "postId", "postIdRegEx", "index", "$this", "$secs", "$subSecs", "$subSubSecs", "secContentsId", "$secI", "$secIH2", "$subsecJH3", "$subsubsecKH4", "secN", "secITxt", "subsecI", "subsubsecI", "tocHtml", "secId", "secPreTxt", "$eqqs", "eqN", "eqC", "$figs", "fTocHtml", "numbering", "fSecHtml", "endA0", "endA1", "fEqqHtml", "figN", "ith", "orgTxt", "pad", "max", "refN", "preRefHtml", "refHtml", "citeN", "fCiteHtml", "$olRefs", "$refs", "refsN", "$cites", "$citeI", "$refered", "refNHtml", "$refers", "$referI"]
}
